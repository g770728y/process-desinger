(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";(function(e,r){n.d(t,"d",function(){return $t}),n.d(t,"b",function(){return Ft}),n.d(t,"a",function(){return Wt}),n.d(t,"c",function(){return Gt});var o=n(0),i=n.n(o),a=n(3),s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};var c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function u(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function l(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var p="An invariant failed, however the error is obfuscated because this is an production build.",d=[];Object.freeze(d);var f={};function h(){return++xe.mobxGuid}function y(e){throw v(!1,e),"X"}function v(e,t){if(!e)throw new Error("[mobx] "+(t||p))}Object.freeze(f);function b(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var m=function(){};function g(e){return null!==e&&"object"===typeof e}function w(e){if(null===e||"object"!==typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function x(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function E(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return g(e)&&!0===e[n]}}function O(e){return e instanceof Map}function _(e){return null===e?null:"object"===typeof e?""+e:e}var S=Symbol("mobx administration"),j=function(){function e(e){void 0===e&&(e="Atom@"+h()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=te.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.reportObserved=function(){return Ae(this)},e.prototype.reportChanged=function(){je(),function(e){if(e.lowestObserverState===te.STALE)return;e.lowestObserverState=te.STALE,e.observers.forEach(function(t){t.dependenciesState===te.UP_TO_DATE&&(t.isTracing!==re.NONE&&Ce(t,e),t.onBecomeStale()),t.dependenciesState=te.STALE})}(this),Ne()},e.prototype.toString=function(){return this.name},e}(),N=E("Atom",j);function A(e,t,n){void 0===t&&(t=m),void 0===n&&(n=m);var r,o=new j(e);return t!==m&&He("onBecomeObserved",o,t,r),n!==m&&function(e,t,n){He("onBecomeUnobserved",e,t,n)}(o,n),o}var C={identity:function(e,t){return e===t},structural:function(e,t){return Pt(e,t)},default:function(e,t){return Object.is(e,t)}},P=Symbol("mobx did run lazy initializers"),T=Symbol("mobx pending decorators"),k={},I={};function D(e){if(!0!==e[P]){var t=e[T];if(t)for(var n in x(e,P,!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function R(e,t){return function(){var n,r,o=function(r,o,i,a){if(!0===a)return t(r,o,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,T)){var s=r[T];x(r,T,c({},s))}return r[T][o]={prop:o,propertyCreator:t,descriptor:i,decoratorTarget:r,decoratorArguments:n},function(e,t){var n=t?k:I;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return D(this),this[e]},set:function(t){D(this),this[e]=t}})}(o,e)};return(2===(r=arguments).length||3===r.length)&&"string"===typeof r[1]||4===r.length&&!0===r[3]?(n=d,o.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),o)}}function M(e,t,n){return Je(e)?e:Array.isArray(e)?$.array(e,{name:n}):w(e)?$.object(e,void 0,{name:n}):O(e)?$.map(e,{name:n}):e}function V(e){return e}function U(t){v(t);var n=R(!0,function(e,n,r,o,i){var a=r?r.initializer?r.initializer.call(e):r.value:void 0;xt(e).addObservableProp(n,a,t)}),r=("undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:""}),n);return r.enhancer=t,r}var B={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function L(e){return null===e||void 0===e?B:"string"===typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(B);var W=U(M),G=U(function(e,t,n){return void 0===e||null===e?e:jt(e)||vt(e)||gt(e)?e:Array.isArray(e)?$.array(e,{name:n,deep:!1}):w(e)?$.object(e,void 0,{name:n,deep:!1}):O(e)?$.map(e,{name:n,deep:!1}):y(!1)}),Y=U(V),X=U(function(e,t,n){return Pt(e,t)?t:e});function H(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?V:M}var K={box:function(e,t){arguments.length>2&&F("box");var n=L(t);return new oe(e,H(n),n.name)},array:function(e,t){arguments.length>2&&F("array");var n=L(t);return function(e,t,n,r){void 0===n&&(n="ObservableArray@"+h());void 0===r&&(r=!1);var o=new dt(n,t,r);i=o.values,a=S,s=o,Object.defineProperty(i,a,{enumerable:!1,writable:!1,configurable:!0,value:s});var i,a,s;var c=new Proxy(o.values,pt);if(o.proxy=c,e&&e.length){var u=Z(!0);o.spliceWithArray(0,0,e),ee(u)}return c}(e,H(n),n.name)},map:function(e,t){arguments.length>2&&F("map");var n=L(t);return new mt(e,H(n),n.name)},object:function(e,t,n){"string"===typeof arguments[1]&&F("object");var r=L(n);if(!1===r.proxy)return $e({},e,t,r);var o=Fe(r),i=function(e){var t=new Proxy(e,ot);return e[S].proxy=t,t}($e({},void 0,void 0,r));return ze(i,e,t,o),i},ref:Y,shallow:G,deep:W,struct:X},$=function(e,t,n){if("string"===typeof arguments[1])return W.apply(null,arguments);if(Je(e))return e;var r=w(e)?$.object(e,t,n):Array.isArray(e)?$.array(e,t):O(e)?$.map(e,t):e;if(r!==e)return r;y(!1)};function F(e){y("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(K).forEach(function(e){return $[e]=K[e]});var z=R(!1,function(e,t,n,r,o){var i=n.get,a=n.set,s=o[0]||{};xt(e).addComputedProp(e,t,c({get:i,set:a,context:e},s))}),q=z({equals:C.structural}),J=function(e,t,n){if("string"===typeof t)return z.apply(null,arguments);if(null!==e&&"object"===typeof e&&1===arguments.length)return z.apply(null,arguments);var r="object"===typeof t?t:{};return r.get=e,r.set="function"===typeof t?t:r.set,r.name=r.name||e.name||"",new ae(r)};function Q(e,t){var n=function(){return function(e,t,n,r){var o=function(e,t,n,r){var o=Ve()&&!!e,i=0;var a=ye();je();var s=Z(!0);return{prevDerivation:a,prevAllowStateChanges:s,notifySpy:o,startTime:i}}(e);try{return t.apply(n,r)}finally{!function(e){ee(e.prevAllowStateChanges),Ne(),ve(e.prevDerivation),e.notifySpy,0}(o)}}(e,t,this,arguments)};return n.isMobxAction=!0,n}function Z(e){var t=xe.allowStateChanges;return xe.allowStateChanges=e,t}function ee(e){xe.allowStateChanges=e}J.struct=q;var te,ne,re,oe=function(e){function t(t,n,r,o){void 0===r&&(r="ObservableValue@"+h()),void 0===o&&(o=!0);var i=e.call(this,r)||this;return i.enhancer=n,i.hasUnreportedChange=!1,i.value=n(t,void 0,r),o&&Ve(),i}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==xe.UNCHANGED){Ve();0,this.setNewValue(e)}},t.prototype.prepareNewValue=function(e){if(pe(this),it(this)){var t=st(this,{object:this,type:"update",newValue:e});if(!t)return xe.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:xe.UNCHANGED},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),ct(this)&&lt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return at(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),ut(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return _(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(j),ie=E("ObservableValue",oe),ae=function(){function e(e){this.dependenciesState=te.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=te.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+h(),this.value=new ce(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=re.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+h(),e.set&&(this.setter=Q(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?C.structural:C.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==te.UP_TO_DATE)return;e.lowestObserverState=te.POSSIBLY_STALE,e.observers.forEach(function(t){t.dependenciesState===te.UP_TO_DATE&&(t.dependenciesState=te.POSSIBLY_STALE,t.isTracing!==re.NONE&&Ce(t,e),t.onBecomeStale())})}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.get=function(){this.isComputing&&y("Cycle detected in computation "+this.name+": "+this.derivation),0!==xe.inBatch||0!==this.observers.size||this.keepAlive?(Ae(this),le(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===te.STALE)return;e.lowestObserverState=te.STALE,e.observers.forEach(function(t){t.dependenciesState===te.POSSIBLY_STALE?t.dependenciesState=te.STALE:t.dependenciesState===te.UP_TO_DATE&&(e.lowestObserverState=te.UP_TO_DATE)})}(this)):le(this)&&(this.warnAboutUntrackedRead(),je(),this.value=this.computeValue(!1),Ne());var e=this.value;if(ue(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ue(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){v(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else v(!1,!1)},e.prototype.trackAndCompute=function(){Ve();var e=this.value,t=this.dependenciesState===te.NOT_TRACKING,n=this.computeValue(!0),r=t||ue(e)||ue(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,xe.computationDepth++,e)t=de(this,this.derivation,this.scope);else if(!0===xe.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new ce(n)}return xe.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(fe(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,o=void 0;return function(e,t){void 0===t&&(t=f);0;var n,r=t&&t.name||e.name||"Autorun@"+h();if(t.scheduler||t.delay){var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Xe}(t),i=!1;n=new Pe(r,function(){i||(i=!0,o(function(){i=!1,n.isDisposed||n.track(a)}))},t.onError)}else n=new Pe(r,function(){this.track(a)},t.onError);function a(){e(n)}return n.schedule(),n.getDisposer()}(function(){var i=n.get();if(!r||t){var a=ye();e({type:"update",object:n,newValue:i,oldValue:o}),ve(a)}r=!1,o=i})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return _(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),se=E("ComputedValue",ae);(ne=te||(te={}))[ne.NOT_TRACKING=-1]="NOT_TRACKING",ne[ne.UP_TO_DATE=0]="UP_TO_DATE",ne[ne.POSSIBLY_STALE=1]="POSSIBLY_STALE",ne[ne.STALE=2]="STALE",function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(re||(re={}));var ce=function(){return function(e){this.cause=e}}();function ue(e){return e instanceof ce}function le(e){switch(e.dependenciesState){case te.UP_TO_DATE:return!1;case te.NOT_TRACKING:case te.STALE:return!0;case te.POSSIBLY_STALE:for(var t=ye(),n=e.observing,r=n.length,o=0;o<r;o++){var i=n[o];if(se(i)){if(xe.disableErrorBoundaries)i.get();else try{i.get()}catch(a){return ve(t),!0}if(e.dependenciesState===te.STALE)return ve(t),!0}}return be(e),ve(t),!1}}function pe(e){var t=e.observers.size>0;xe.computationDepth>0&&t&&y(!1),xe.allowStateChanges||!t&&"strict"!==xe.enforceActions||y(!1)}function de(e,t,n){be(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++xe.runId;var r,o=xe.trackingDerivation;if(xe.trackingDerivation=e,!0===xe.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(i){r=new ce(i)}return xe.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=te.UP_TO_DATE,o=0,i=e.unboundDepsCount,a=0;a<i;a++){var s=n[a];0===s.diffValue&&(s.diffValue=1,o!==a&&(n[o]=s),o++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=o,e.newObserving=null,i=t.length;for(;i--;){var s=t[i];0===s.diffValue&&_e(s,e),s.diffValue=0}for(;o--;){var s=n[o];1===s.diffValue&&(s.diffValue=0,Oe(s,e))}r!==te.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),r}function fe(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)_e(t[n],e);e.dependenciesState=te.NOT_TRACKING}function he(e){var t=ye();try{return e()}finally{ve(t)}}function ye(){var e=xe.trackingDerivation;return xe.trackingDerivation=null,e}function ve(e){xe.trackingDerivation=e}function be(e){if(e.dependenciesState!==te.UP_TO_DATE){e.dependenciesState=te.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=te.UP_TO_DATE}}var me=function(){return function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),ge=!0,we=!1,xe=function(){var e=Ee();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(ge=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new me).version&&(ge=!1),ge?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new me):(setTimeout(function(){we||y("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new me)}();function Ee(){return"undefined"!==typeof window?window:r}function Oe(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function _e(e,t){e.observers.delete(t),0===e.observers.size&&Se(e)}function Se(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,xe.pendingUnobservations.push(e))}function je(){xe.inBatch++}function Ne(){if(0===--xe.inBatch){Ie();for(var e=xe.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ae&&n.suspend())}xe.pendingUnobservations=[]}}function Ae(e){var t=xe.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&xe.inBatch>0&&Se(e),!1)}function Ce(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===re.BREAK){var n=[];!function e(t,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+t.name);t.dependencies&&t.dependencies.forEach(function(t){return e(t,n,r+1)})}((r=e,qe(Nt(r,o))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ae?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r,o}var Pe=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+h()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=te.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+h(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=re.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,xe.pendingReactions.push(this),Ie())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(je(),this._isScheduled=!1,le(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ve()}catch(e){this.reportExceptionInDerivation(e)}}Ne()}},e.prototype.track=function(e){je();Ve();this._isRunning=!0;var t=de(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&fe(this),ue(t)&&this.reportExceptionInDerivation(t.cause),Ne()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(xe.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,e),Ve()&&Ue({type:"error",name:this.name,message:n,error:""+e}),xe.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(je(),fe(this),Ne()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[S]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"===typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return xe.trackingDerivation;case 1:return Nt(e[0]);case 2:return Nt(e[0],e[1])}}(e);if(!r)return y(!1);r.isTracing===re.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled");r.isTracing=n?re.BREAK:re.LOG}(this,e)},e}(),Te=100,ke=function(e){return e()};function Ie(){xe.inBatch>0||xe.isRunningReactions||ke(De)}function De(){xe.isRunningReactions=!0;for(var e=xe.pendingReactions,t=0;e.length>0;){++t===Te&&(console.error("Reaction doesn't converge to a stable state after "+Te+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction()}xe.isRunningReactions=!1}var Re=E("Reaction",Pe);function Me(e){var t=ke;ke=function(n){return e(function(){return t(n)})}}function Ve(){return!1}function Ue(e){}function Be(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Le(){y(!1)}function We(e){return function(t,n,r){if(r){if(r.value)return{value:Q(e,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Q(e,o.call(this))}}}return function(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){x(this,n,Ge(e,t))}})}}(e).apply(this,arguments)}}var Ge=function(e,t,n,r){return 1===arguments.length&&"function"===typeof e?Q(e.name||"<unnamed action>",e):2===arguments.length&&"function"===typeof t?Q(e,t):1===arguments.length&&"string"===typeof e?We(e):!0!==r?We(t).apply(null,arguments):void x(e,t,Q(e.name||t,n.value))};function Ye(e,t,n){x(e,t,Q(t,n.bind(e)))}Ge.bound=function(e,t,n,r){return!0===r?(Ye(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Ye(this,t,n.value||n.initializer.call(this)),this[t]},set:Le}:{enumerable:!1,configurable:!0,set:function(e){Ye(this,t,e)},get:function(){}}};var Xe=function(e){return e()};function He(e,t,n,r){var o="string"===typeof n?Nt(t,n):Nt(t),i="string"===typeof n?r:n,a=e+"Listeners";return o[a]?o[a].add(i):o[a]=new Set([i]),"function"!==typeof o[e]?y(!1):function(){var e=o[a];e&&(e.delete(i),0===e.size&&delete o[a])}}function Ke(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.disableErrorBoundaries,o=e.reactionScheduler;if(void 0!==t){var i=void 0;switch(t){case!0:case"observed":i=!0;break;case!1:case"never":i=!1;break;case"strict":case"always":i="strict";break;default:y("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}xe.enforceActions=i,xe.allowStateChanges=!0!==i&&"strict"!==i}void 0!==n&&(xe.computedRequiresReaction=!!n),!0===e.isolateGlobalState&&((xe.pendingReactions.length||xe.inBatch||xe.isRunningReactions)&&y("isolateGlobalState should be called before MobX is running any reactions"),we=!0,ge&&(0===--Ee().__mobxInstanceCount&&(Ee().__mobxGlobals=void 0),xe=new me)),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),xe.disableErrorBoundaries=!!r),o&&Me(o)}function $e(e,t,n,r){var o=Fe(r=L(r));return D(e),xt(e,r.name,o.enhancer),t&&ze(e,t,n,o),e}function Fe(e){return e.defaultDecorator||(!1===e.deep?Y:W)}function ze(e,t,n,r){je();try{for(var o in t){var i=Object.getOwnPropertyDescriptor(t,o);0;var a=(n&&o in n?n[o]:i.get?z:r)(e,o,i,!0);a&&Object.defineProperty(e,o,a)}}finally{Ne()}}function qe(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=function(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}(e.observing).map(qe)),t}function Je(e){return 1!==arguments.length&&y(!1),function(e,t){return null!==e&&void 0!==e&&(void 0!==t?!!jt(e)&&e[S].values.has(t):jt(e)||!!e[S]||N(e)||Re(e)||se(e))}(e)}var Qe={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Ze(e,t,n,r){return r.detectCycles&&e.set(t,n),n}function et(e,t,n){if(!t.recurseEverything&&!Je(e))return e;if("object"!==typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(ie(e))return et(e.get(),t,n);var r;if(Je(e)&&(jt(r=e)?r[S].getKeys():gt(r)?Array.from(r.keys()):vt(r)?r.map(function(e,t){return t}):y(!1)),!0===t.detectCycles&&null!==e&&n.has(e))return n.get(e);if(vt(e)||Array.isArray(e)){var o=Ze(n,e,[],t),i=e.map(function(e){return et(e,t,n)});o.length=i.length;for(var a=0,s=i.length;a<s;a++)o[a]=i[a];return o}if(gt(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===t.exportMapsAsObjects){var c=Ze(n,e,new Map,t);return e.forEach(function(e,r){c.set(r,et(e,t,n))}),c}var u=Ze(n,e,{},t);return e.forEach(function(e,r){u[r]=et(e,t,n)}),u}var l=Ze(n,e,{},t);for(var p in e)l[p]=et(e[p],t,n);return l}function tt(e,t){var n;return"boolean"===typeof t&&(t={detectCycles:t}),t||(t=Qe),t.detectCycles=void 0===t.detectCycles?!0===t.recurseEverything:!0===t.detectCycles,t.detectCycles&&(n=new Map),et(e,t,n)}function nt(e,t){void 0===t&&(t=void 0),je();try{return e.apply(t)}finally{Ne()}}function rt(e){return e[S]}var ot={has:function(e,t){if(t===S||"constructor"===t||t===P)return!0;var n=rt(e);return"string"===typeof t?n.has(t):t in e},get:function(e,t){if(t===S||"constructor"===t||t===P)return e[t];var n=rt(e),r=n.values.get(t);if(r instanceof j){var o=r.get();return void 0===o&&n.has(t),o}return"string"===typeof t&&n.has(t),e[t]},set:function(e,t,n){return"string"===typeof t&&(function e(t,n,r){if(2!==arguments.length)if(jt(t)){var o=t[S];o.values.get(n)?o.write(n,r):o.addObservableProp(n,r,o.defaultEnhancer)}else if(gt(t))t.set(n,r);else{if(!vt(t))return y(!1);"number"!==typeof n&&(n=parseInt(n,10)),v(n>=0,"Not a valid index: '"+n+"'"),je(),n>=t.length&&(t.length=n+1),t[n]=r,Ne()}else{je();var i=n;try{for(var a in i)e(t,a,i[a])}finally{Ne()}}}(e,t,n),!0)},deleteProperty:function(e,t){return"string"===typeof t&&(rt(e).remove(t),!0)},ownKeys:function(e){return rt(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return y("Dynamic observable objects cannot be frozen"),!1}};function it(e){return void 0!==e.interceptors&&e.interceptors.length>0}function at(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),b(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function st(e,t){var n=ye();try{var r=e.interceptors;if(r)for(var o=0,i=r.length;o<i&&(v(!(t=r[o](t))||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{ve(n)}}function ct(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function ut(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),b(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function lt(e,t){var n=ye(),r=e.changeListeners;if(r){for(var o=0,i=(r=r.slice()).length;o<i;o++)r[o](t);ve(n)}}var pt={get:function(e,t){return t===S?e[S]:"length"===t?e[S].getArrayLength():"number"===typeof t?ft.get.call(e,t):"string"!==typeof t||isNaN(t)?ft.hasOwnProperty(t)?ft[t]:e[t]:ft.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t?(e[S].setArrayLength(n),!0):"number"===typeof t?(ft.set.call(e,t,n),!0):!isNaN(t)&&(ft.set.call(e,parseInt(t),n),!0)},preventExtensions:function(e){return y("Observable arrays cannot be frozen"),!1}};var dt=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new j(e||"ObservableArray@"+h()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return at(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ut(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!==typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var r=this;pe(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:void 0===t||null===t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=d),it(this)){var i=st(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!i)return d;t=i.removedCount,n=i.added}n=0===n.length?n:n.map(function(e){return r.enhancer(e,void 0)});var a=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,a),this.dehanceValues(a)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}([e,t],n));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&!1,o=ct(this),i=o||r?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),o&&lt(this,i)},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&!1,o=ct(this),i=o||r?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&lt(this,i)},e}(),ft={intercept:function(e){return this[S].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[S].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[S];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this[S];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(e);case 2:return o.spliceWithArray(e,t)}return o.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[S].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[S];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[S].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[S];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[S],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[S];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[S],r=n.values;if(e<r.length){pe(n.atom);var o=r[e];if(it(n)){var i=st(n,{type:"update",object:this,index:e,newValue:t});if(!i)return;t=i.newValue}(t=n.enhancer(t,o))!==o&&(r[e]=t,n.notifyArrayChildUpdate(e,t,o))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){ft[e]=function(){var t=this[S];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)}});var ht,yt=E("ObservableArrayAdministration",dt);function vt(e){return g(e)&&yt(e[S])}var bt={},mt=function(){function e(e,t,n){if(void 0===t&&(t=M),void 0===n&&(n="ObservableMap@"+h()),this.enhancer=t,this.name=n,this[ht]=bt,this._keysAtom=A(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(it(this)){var r=st(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(it(this)&&!(r=st(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=ct(this),r=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return nt(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),n&&lt(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new oe(t,V,this.name+"."+e+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==xe.UNCHANGED){var r=ct(this),o=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;0,n.setNewValue(t),r&&lt(this,o)}},e.prototype._addValue=function(e,t){var n=this;pe(this._keysAtom),nt(function(){var r=new oe(t,n.enhancer,n.name+"."+e,!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()});var r=ct(this),o=r?{type:"add",object:this,name:e,newValue:t}:null;r&&lt(this,o)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,n=Array.from(this.keys());return Dt({next:function(){return t<n.length?{value:e.get(n[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,t=0,n=Array.from(this.keys());return Dt({next:function(){if(t<n.length){var r=n[t++];return{value:[r,e.get(r)],done:!1}}return{done:!0}}})},e.prototype[(ht=S,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,r;try{for(var o=u(this),i=o.next();!i.done;i=o.next()){var a=l(i.value,2),s=a[0],c=a[1];e.call(t,c,s,this)}}catch(p){n={error:p}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return gt(e)&&(e=e.toJS()),nt(function(){w(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=l(e,2),r=n[0],o=n[1];return t.set(r,o)}):O(e)?e.forEach(function(e,n){return t.set(n,e)}):null!==e&&void 0!==e&&y("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;nt(function(){he(function(){var t,n;try{for(var r=u(e.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;e.delete(i)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})})},e.prototype.replace=function(e){var t=this;return nt(function(){var n,r=w(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(e){return l(e,1)[0]}):O(n)||gt(n)?Array.from(n.keys()):y("Cannot get keys from '"+n+"'");Array.from(t.keys()).filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){return t.delete(e)}),t.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var r=u(this),o=r.next();!o.done;o=r.next()){var i=l(o.value,2),a=i[0],s=i[1];n[""+a]=s}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return ut(this,e)},e.prototype.intercept=function(e){return at(this,e)},e}(),gt=E("ObservableMap",mt),wt=function(){function e(e,t,n,r){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=r,this.keysAtom=new j(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,r=this.values.get(e);if(r instanceof ae)r.set(t);else{if(it(this)){if(!(i=st(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=i.newValue}if((t=r.prepareNewValue(t))!==xe.UNCHANGED){var o=ct(this),i=o?{type:"update",object:this.proxy||n,oldValue:r.value,name:e,newValue:t}:null;0,r.setNewValue(t),o&&lt(this,i)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var r=!!this.values.get(e);return n=new oe(r,V,this.name+"."+e.toString()+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(it(this)){var o=st(this,{object:this.proxy||r,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var i=new oe(t,n,this.name+"."+e,!1);this.values.set(e,i),t=i.value,Object.defineProperty(r,e,function(e){return Et[e]||(Et[e]={configurable:!0,enumerable:!0,get:function(){return this[S].read(e)},set:function(t){this[S].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var r=this.target;n.name=n.name||this.name+"."+t,this.values.set(t,new ae(n)),(e===r||function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||!1!==n.configurable&&!1!==n.writable}(e,t))&&Object.defineProperty(e,t,function(e){return Ot[e]||(Ot[e]={configurable:!0,enumerable:!1,get:function(){return _t(this).read(e)},set:function(t){_t(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(it(this))if(!(a=st(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{je();var n=ct(this),r=this.values.get(e),o=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var i=this.pendingKeys.get(e);i&&i.set(!1)}delete this.target[e];var a=n?{type:"remove",object:this.proxy||t,oldValue:o,name:e}:null;0,n&&lt(this,a)}finally{Ne()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return ut(this,e)},e.prototype.intercept=function(e){return at(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=ct(this),r=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&lt(this,r),this.pendingKeys){var o=this.pendingKeys.get(e);o&&o.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var r=u(this.values),o=r.next();!o.done;o=r.next()){var i=l(o.value,2),a=i[0];i[1]instanceof oe&&n.push(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e}();function xt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=M),Object.prototype.hasOwnProperty.call(e,S))return e[S];w(e)||(t=(e.constructor.name||"ObservableObject")+"@"+h()),t||(t="ObservableObject@"+h());var r=new wt(e,new Map,t,n);return x(e,S,r),r}var Et=Object.create(null),Ot=Object.create(null);function _t(e){var t=e[S];return t||(D(e),e[S])}var St=E("ObservableObjectAdministration",wt);function jt(e){return!!g(e)&&(D(e),St(e[S]))}function Nt(e,t){if("object"===typeof e&&null!==e){if(vt(e))return void 0!==t&&y(!1),e[S].atom;if(gt(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||y(!1),r)}var r;if(D(e),t&&!e[S]&&e[t],jt(e))return t?((r=e[S].values.get(t))||y(!1),r):y(!1);if(N(e)||se(e)||Re(e))return e}else if("function"===typeof e&&Re(e[S]))return e[S];return y(!1)}function At(e,t){return(void 0!==t?Nt(e,t):jt(e)||gt(e)?function e(t,n){return t||y("Expecting some object"),void 0!==n?e(Nt(t,n)):N(t)||se(t)||Re(t)?t:gt(t)?t:(D(t),t[S]?t[S]:void y(!1))}(e):Nt(e)).name}var Ct=Object.prototype.toString;function Pt(e,t){return Tt(e,t)}function Tt(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&function(e,t,n,r){e=kt(e),t=kt(t);var o=Ct.call(e);if(o!==Ct.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!("function"===typeof a&&a instanceof a&&"function"===typeof s&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];var c=(n=n||[]).length;for(;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),i){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Tt(e[c],t[c],n,r))return!1}else{var u,l=Object.keys(e);if(c=l.length,Object.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!It(t,u)||!Tt(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0}(e,t,n,r)}function kt(e){return vt(e)?e.slice():O(e)||gt(e)?Array.from(e.entries()):e}function It(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dt(e){return e[Symbol.iterator]=Rt,e}function Rt(){return this}if("undefined"===typeof Proxy||"undefined"===typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Be,extras:{getDebugName:At},$mobx:S});var Mt=function(e,t){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Vt(e,t){function n(){this.constructor=e}Mt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ut=function(){return(Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Bt(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function Lt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Wt,Gt,Yt="styles_pd-container__3WIdJ",Xt="styles_pd-node-templates-panel__UQj2a",Ht="styles_pd-node-template-item-wrapper__1aIWp",Kt="styles_pd-painter-wrapper__bYGWI";Lt("/* add css styles here (optional) */\n\n.styles_pd-container__3WIdJ {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n}\n\n.styles_pd-node-templates-panel__UQj2a {\n  width: 200px;\n  flex-grow: 0;\n  flex-shrink: 0;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n\n  background: #f2f2f2;\n}\n\n.styles_pd-node-template-item-wrapper__1aIWp {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 0;\n}\n\n.styles_pd-canvas__aS3hB {\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n\n.styles_pd-painter-wrapper__bYGWI {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n}\n\n.styles_pd-painter-wrapper__bYGWI::-webkit-scrollbar {\n  width: 0 !important;\n}\n"),function(e){e.Node="node",e.Edge="edge",e.OrphanEdge="oedge",e.Grip="grip"}(Wt||(Wt={})),function(e){e[e.Rect=0]="Rect",e[e.Circle=1]="Circle"}(Gt||(Gt={}));var $t=0,Ft=1e6,zt=[{id:$t,type:Wt.Node,label:"\u5f00\u59cb",shape:Gt.Circle,dim:{r:30}},{id:Ft,type:Wt.Node,label:"\u7ed3\u675f",shape:Gt.Circle,dim:{r:30}}];var qt=10,Jt=5,Qt={nodes:[{id:$t,type:Wt.Node,templateId:$t,dim:{cx:300,cy:100,r:30}}],edges:[]},Zt={canvas:{background:"#ffffff"},rearrange:{hGap:20,vGap:50}};function en(e){return(en="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t,n){return t&&nn(e.prototype,t),n&&nn(e,n),e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e,t){return e(t={exports:{}},t.exports),t.exports}var pn,dn=ln(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case p:case i:case s:case a:return e;default:switch(e=e&&e.$$typeof){case u:case d:case c:return e;default:return t}}case o:return t}}}function b(e){return v(e)===p}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Profiler=s,t.Portal=o,t.StrictMode=a,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===p||e===s||e===a||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d)},t.isAsyncMode=function(e){return b(e)||v(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===s},t.isPortal=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===a}});(pn=dn)&&pn.__esModule&&Object.prototype.hasOwnProperty.call(pn,"default")&&pn.default;dn.typeOf,dn.AsyncMode,dn.ConcurrentMode,dn.ContextConsumer,dn.ContextProvider,dn.Element,dn.ForwardRef,dn.Fragment,dn.Profiler,dn.Portal,dn.StrictMode,dn.isValidElementType,dn.isAsyncMode,dn.isConcurrentMode,dn.isContextConsumer,dn.isContextProvider,dn.isElement,dn.isForwardRef,dn.isFragment,dn.isProfiler,dn.isPortal,dn.isStrictMode;var fn=ln(function(e){e.exports=dn}),hn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},yn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vn={};vn[fn.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var bn=Object.defineProperty,mn=Object.getOwnPropertyNames,gn=Object.getOwnPropertySymbols,wn=Object.getOwnPropertyDescriptor,xn=Object.getPrototypeOf,En=Object.prototype;var On=function e(t,n,r){if("string"!==typeof n){if(En){var o=xn(n);o&&o!==En&&e(t,o,r)}var i=mn(n);gn&&(i=i.concat(gn(n)));for(var a=vn[t.$$typeof]||hn,s=vn[n.$$typeof]||hn,c=0;c<i.length;++c){var u=i[c];if(!yn[u]&&(!r||!r[u])&&(!s||!s[u])&&(!a||!a[u])){var l=wn(n,u);try{bn(t,u,l)}catch(p){}}}return t}return t},_n=function(){function e(){tn(this,e),this.listeners=[]}return rn(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}();function Sn(e){function t(t,n,r,o,i,a){for(var s=arguments.length,c=new Array(s>6?s-6:0),u=6;u<s;u++)c[u-6]=arguments[u];return he(function(){if(o=o||"<<anonymous>>",a=a||r,null==n[r]){if(t){var s=null===n[r]?"null":"undefined";return new Error("The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+s+"`.")}return null}return e.apply(void 0,[n,r,o,i,a].concat(c))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function jn(e){var t=en(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function Nn(e,t){return Sn(function(n,r,o,i,a){return he(function(){if(e&&jn(n[r])===t.toLowerCase())return null;var i;switch(t){case"Array":i=vt;break;case"Object":i=jt;break;case"Map":i=gt;break;default:throw new Error("Unexpected mobxType: ".concat(t))}var s=n[r];if(!i(s)){var c=function(e){var t=jn(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(s),u=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+c+"` supplied to `"+o+"`, expected `mobx.Observable"+t+"`"+u+".")}return null})})}function An(e,t){return Sn(function(n,r,o,i,a){for(var s=arguments.length,c=new Array(s>5?s-5:0),u=5;u<s;u++)c[u-5]=arguments[u];return he(function(){if("function"!==typeof t)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var s=Nn(e,"Array")(n,r,o);if(s instanceof Error)return s;for(var u=n[r],l=0;l<u.length;l++)if((s=t.apply(void 0,[u,l,o,i,a+"["+l+"]"].concat(c)))instanceof Error)return s;return null})})}Nn(!1,"Array"),An.bind(null,!1),Nn(!1,"Map"),Nn(!1,"Object"),Nn(!0,"Array"),An.bind(null,!0);var Cn=Nn(!0,"Object");var Pn=0;function Tn(e){if("function"===typeof Symbol)return Symbol(e);var t="__$mobx-react ".concat(e," (").concat(Pn,")");return Pn++,t}var kn=Tn("patchMixins"),In=Tn("patchedDefinition");function Dn(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t.locks++;try{var a;return void 0!==e&&null!==e&&(a=e.apply(this,o)),a}finally{t.locks--,0===t.locks&&t.methods.forEach(function(e){e.apply(n,o)})}}function Rn(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];Dn.call.apply(Dn,[this,e,t].concat(r))}}function Mn(e,t){for(var n=function(e,t){var n=e[kn]=e[kn]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t),r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];n.methods.indexOf(s)<0&&n.methods.push(s)}var c=Object.getOwnPropertyDescriptor(e,t);if(!c||!c[In]){var u=e[t],l=function e(t,n,r,o,i){var a;var s=Rn(i,o);return a={},on(a,In,!0),on(a,"get",function(){return s}),on(a,"set",function(i){if(this===t)s=Rn(i,o);else{var a=e(this,n,r,o,i);Object.defineProperty(this,n,a)}}),on(a,"configurable",!0),on(a,"enumerable",r),a}(e,t,c?c.enumerable:void 0,n,u);Object.defineProperty(e,t,l)}}var Vn={mobxStores:Cn};Object.seal(Vn);var Un={contextTypes:{get:function(){return Vn},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function Bn(e,t,n){var r="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(r+="-with-"+n);var i=function(n){function r(){var e,t;tn(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=un(this,(e=sn(r)).call.apply(e,[this].concat(o)))).storeRef=function(e){t.wrappedInstance=e},t}return an(r,o["Component"]),rn(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var i=e(this.context.mobxStores||{},n,this.context)||{};for(var a in i)n[a]=i[a];return function(e){return!(e.prototype&&e.prototype.render)}(t)||(n.ref=this.storeRef),Object(o.createElement)(t,n)}}]),r}();return i.displayName=r,On(i,t),i.wrappedComponent=t,Object.defineProperties(i,Un),i}function Ln(){var e;if("function"===typeof arguments[0])return e=arguments[0],function(t){var n=Bn(e,t);return n.isMobxInjector=!1,(n=ar(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}(t),function(n){return Bn(e,n,t.join("-"))}}var Wn=S||"$mobx",Gn=Tn("isUnmounted"),Yn=!1,Xn=!1,Hn=!1,Kn="undefined"!==typeof WeakMap?new WeakMap:void 0,$n=new _n,Fn=Tn("skipRender"),zn=Tn("isForcingUpdate"),qn="function"===typeof o.forwardRef&&Object(o.forwardRef)(function(e,t){}).$$typeof;function Jn(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}function Qn(e){if(a.findDOMNode)try{return Object(a.findDOMNode)(e)}catch(t){return null}return null}function Zn(e){var t=Qn(e);t&&Kn&&Kn.set(t,e),$n.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}var er=new _n;function tr(e,t){if(nr(e,t))return!0;if("object"!==en(e)||null===e||"object"!==en(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!hasOwnProperty.call(t,n[o])||!nr(e[n[o]],t[n[o]]))return!1;return!0}function nr(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function rr(e){var t=this;if(!0===Xn)return e.call(this);function n(){var e=this;s=!1;var t=void 0,n=void 0;if(c.track(function(){Yn&&(e.__$mobRenderStart=Date.now());try{n=function(e,t){var n,r=Z(e);try{n=t()}finally{ee(r)}return n}(!1,a)}catch(r){t=r}Yn&&(e.__$mobRenderEnd=Date.now())}),t)throw er.emit(t),t;return n}var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;Jn(this,Fn,!1),Jn(this,zn,!1);var a=e.bind(this),s=!1,c=new Pe("".concat(r,"#").concat(i,".render()"),function(){if(!s&&(s=!0,"function"===typeof t.componentWillReact&&t.componentWillReact(),!0!==t[Gn])){var e=!0;try{Jn(t,zn,!0),t[Fn]||o.Component.prototype.forceUpdate.call(t),e=!1}finally{Jn(t,zn,!1),e&&c.dispose()}}});return c.reactComponent=this,n[Wn]=c,this.render=n,n.call(this)}var or={componentWillUnmount:function(){if(!0!==Xn&&(this.render[Wn]&&this.render[Wn].dispose(),this[Gn]=!0,Yn)){var e=Qn(this);e&&Kn&&Kn.delete(e),$n.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){Yn&&Zn(this)},componentDidUpdate:function(){Yn&&Zn(this)},shouldComponentUpdate:function(e,t){return Xn&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!tr(this.props,e)}};function ir(e,t){var n=Tn("reactProp_".concat(t,"_valueHolder")),r=Tn("reactProp_".concat(t,"_atomHolder"));function o(){return this[r]||Jn(this,r,A("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[n]},set:function(e){this[zn]||tr(this[n],e)?Jn(this,n,e):(Jn(this,n,e),Jn(this,Fn,!0),o.call(this).reportChanged(),Jn(this,Fn,!1))}})}function ar(e,t){if("string"===typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return Hn||(Hn=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?Ln.apply(null,e)(ar(t)):function(t){return ar(e,t)};var n=e;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===o.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),qn&&n.$$typeof===qn){var r=n.render;if("function"!==typeof r)throw new Error("render property of ForwardRef was not a function");return Object(o.forwardRef)(function(){var e=arguments;return i.a.createElement(sr,null,function(){return r.apply(void 0,e)})})}if("function"===typeof n&&(!n.prototype||!n.prototype.render)&&!n.isReactClass&&!o.Component.isPrototypeOf(n)){var a,s,c=ar((s=a=function(e){function t(){return tn(this,t),un(this,sn(t).apply(this,arguments))}return an(t,o["Component"]),rn(t,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),t}(),a.displayName=n.displayName||n.name,a.contextTypes=n.contextTypes,a.propTypes=n.propTypes,a.defaultProps=n.defaultProps,s));return On(c,n),c}if(!n)throw new Error("Please pass a valid component to 'observer'");var u=n.prototype||n;!function(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){!function(e,t){Mn(e,t,or[t])}(e,t)}),e.shouldComponentUpdate?e.shouldComponentUpdate!==or.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=or.shouldComponentUpdate}(u),n.isMobXReactObserver=!0,ir(u,"props"),ir(u,"state");var l=u.render;return u.render=function(){return rr.call(this,l)},n}var sr=ar(function(e){var t=e.children,n=e.inject,r=e.render,o=t||r;if("undefined"===typeof o)return null;if(!n)return o();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var a=Ln(n)(o);return i.a.createElement(a,null)});sr.displayName="Observer";var cr=function(e,t,n,r,o){var i="children"===t?"render":"children";return"function"===typeof e[t]&&"function"===typeof e[i]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!==typeof e[t]&&"function"!==typeof e[i]?new Error("Invalid prop `"+o+"` of type `"+en(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};function ur(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function lr(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function pr(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}sr.propTypes={render:cr,children:cr},ur.__suppressDeprecationWarning=!0,lr.__suppressDeprecationWarning=!0,pr.__suppressDeprecationWarning=!0;var dr={children:!0,key:!0,ref:!0},fr=function(e){function t(e,n){var r;return tn(this,t),(r=un(this,sn(t).call(this,e,n))).state={},hr(e,r.state),r}return an(t,o["Component"]),rn(t,[{key:"render",value:function(){return o.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return hr(this.context.mobxStores,e),hr(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e)return null;if(!t)return e;if(Object.keys(e).filter(yr).length!==Object.keys(t).filter(yr).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var n in e)yr(n)&&t[n]!==e[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),t}();function hr(e,t){if(e)for(var n in e)yr(n)&&(t[n]=e[n])}function yr(e){return!dr[e]&&"suppressChangedStoreWarning"!==e}fr.contextTypes={mobxStores:Cn},fr.childContextTypes={mobxStores:Cn.isRequired},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=ur,t.componentWillReceiveProps=lr),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=pr;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(fr);Tn("disposeOnUnmount");if(!o.Component)throw new Error("mobx-react requires React to be available");if(!Be)throw new Error("mobx-react requires mobx to be available");if("function"===typeof a.unstable_batchedUpdates&&Ke({reactionScheduler:a.unstable_batchedUpdates}),"object"===("undefined"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":en(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var vr={spy:Be,extras:{getDebugName:At}},br={renderReporter:$n,componentByNodeRegistry:Kn,componentByNodeRegistery:Kn,trackComponents:function(){if("undefined"===typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");Yn||(Yn=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(br,vr)}var mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.dataType,n=e.dataId,r=e.anchor,i=e.cx,a=e.cy;return Object(o.createElement)("circle",{style:{cursor:"crosshair"},r:4,fill:"white",stroke:"red",strokeWidth:1,cx:i,cy:a,"data-type":Wt.Grip,"data-host":t+":"+n+":"+r})},t}(o.Component),gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props.node,t=e.id,n=e.dim,r=n.w,i=n.h;return[{anchor:"lc",cx:0,cy:i/2},{anchor:"tc",cx:r/2,cy:0},{anchor:"rc",cx:r,cy:i/2},{anchor:"bc",cx:r/2,cy:i}].map(function(e){return Object(o.createElement)(mr,Ut({key:e.anchor},e,{dataType:Wt.Node,dataId:t}))})},t}(o.Component),wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props.node,t=e.id,n=e.dim.r;return[{anchor:"lc",cx:0,cy:n},{anchor:"tc",cx:n,cy:0},{anchor:"rc",cx:2*n,cy:n},{anchor:"bc",cx:n,cy:2*n}].map(function(e){return Object(o.createElement)(mr,Ut({key:e.anchor},e,{dataType:Wt.Node,dataId:t}))})},t}(o.Component);function xr(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.childRef=Object(o.createRef)(),n.state={hovered:!1},n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseLeave=n.handleMouseLeave.bind(n),n}return Vt(n,t),n.prototype.handleMouseEnter=function(){this.setState({hovered:!0})},n.prototype.handleMouseLeave=function(){this.setState({hovered:!1})},n.prototype.render=function(){return Object(o.createElement)(e,Ut({},this.props,{_ref:this.childRef,hovered:this.state.hovered}))},n.prototype.componentDidMount=function(){var e=this.childRef.current;e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)},n.prototype.componentWillUnmount=function(){var e=this.childRef.current;e.removeEventListener("mouseenter",this.handleMouseEnter),e.removeEventListener("mouseleave",this.handleMouseLeave)},n}(o.Component)}var Er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props.node,t=(e.id,e.dim),n=t.w,r=t.h;return Object(o.createElement)("rect",{style:{cursor:"move"},width:n,height:r,className:"pd-node","data-type":Wt.Node,"data-id":e.id,fill:"#cccccc"})},t}(o.PureComponent),Or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.w,n=e.h,r=e.fontSize,i=e.text,a=r||16;return Object(o.createElement)("text",{style:{pointerEvents:"none",userSelect:"none"},textAnchor:"middle",x:t/2,y:n/2+(a/2-1),fontSize:a},i)},t}(o.PureComponent),_r=xr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.node,n=e.dataStore,r=e._ref,i=e.hovered,a=t.dim,s=t.id,c=t.label,u=a,l=u.cx,p=u.cy,d=a.w||100,f=a.h||30,h=l-d/2,y=p-f/2,v=i||~(n.context.selectedNodeIds||[]).indexOf(s);return Object(o.createElement)("g",{ref:r,transform:"translate("+h+", "+y+")",width:d,height:f,onClick:function(){return n.selectNode(s)}},Object(o.createElement)(Er,{node:t}),Object(o.createElement)(Or,{w:d,h:f,text:c}),v&&Object(o.createElement)(gr,{node:t}))},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component)),Sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props.node,t=(e.id,e.dim),n=t,r=(n.cx,n.cy,t.r);return Object(o.createElement)("circle",{style:{cursor:"move"},className:"pd-node","data-type":Wt.Node,"data-id":e.id,r:r,cx:r,cy:r,fill:"#999999"})},t}(o.PureComponent),jr=xr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.node,n=e.dataStore,r=e._ref,i=e.hovered,a=t.id,s=t.dim,c=t.label,u=s,l=u.cx,p=u.cy,d=s.r||30,f=l-d,h=p-d,y=i||~(n.context.selectedNodeIds||[]).indexOf(a);return Object(o.createElement)("g",{ref:r,transform:"translate("+f+", "+h+")",width:2*d,height:2*d,onClick:function(){return n.selectNode(a)}},Object(o.createElement)(Sr,{node:t}),Object(o.createElement)(Or,{w:2*d,h:2*d,text:c}),y&&Object(o.createElement)(wr,{node:t}))},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component));function Nr(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Ar(e){return e.reduce(function(e,t){return~e.indexOf(t)?e:e.concat([t])},[])}function Cr(e){return e.reduce(function(e,t){return Math.abs(t)<e?t:e})}function Pr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Tr(e,t){var n=e,r=n.cx,o=n.cy,i=e.r;if("tc"===t)return{cx:r,cy:o-i};if("bc"===t)return{cx:r,cy:o+i};if("lc"===t)return{cx:r-i,cy:o};if("rc"===t)return{cx:r+i,cy:o};throw new Error("\u9519\u8bef\u7684anchor\u7c7b\u578b: "+t)}function kr(e,t){var n=e,r=n.cx,o=n.cy,i=e,a=i.w,s=i.h;if("tc"===t)return{cx:r,cy:o-s/2};if("bc"===t)return{cx:r,cy:o+s/2};if("lc"===t)return{cx:r-a/2,cy:o};if("rc"===t)return{cx:r+a/2,cy:o};throw new Error("\u9519\u8bef\u7684anchor\u7c7b\u578b: "+t)}function Ir(e,t){var n=e.dim,r=e.shape;if(r===Gt.Circle)return Tr(n,t);if(r===Gt.Rect)return kr(n,t);throw new Error("\u9519\u8bef\u7684Shape\u7c7b\u578b: "+r)}function Dr(e,t,n){return Ir(e.find(function(e){return e.id===t}),n)}function Rr(e,t,n,r){return Object(o.createElement)("svg",{width:e,height:t,viewBox:"0 0 "+e+" "+t,version:"1.1",xmlns:"http://www.w3.org/2000/svg",ref:r,style:{display:"block"}},n)}function Mr(e){var t,n=e.dim,r=e.shape;if(r===Gt.Rect)return{w:(t=n).w,h:t.h};if(r===Gt.Circle)return{w:2*(t=n).r,h:2*t.r};throw new Error("\u9519\u8bef\u7684nodeTemplate shape:"+r)}function Vr(e,t){var n=e.reduce(function(e,n){if(n.id===t)return e;var r=n.dim,o=r.cx,i=r.cy,a=Mr(n),s=a.w,c=a.h;return{xs:e.xs.concat([o-s/2,o,o+s/2]),ys:e.ys.concat([i-c/2,i,i+c/2])}},{xs:[],ys:[]});return{xs:Ar((n.xs||[]).sort()),ys:Ar((n.ys||[]).sort())}}function Ur(e){e.id;var t=e.shape;if(t===Gt.Rect)return Object(o.createElement)(Er,{node:e});if(t===Gt.Circle)return Object(o.createElement)(Sr,{node:e});throw new Error("\u9519\u8bef\u7684node shape:"+t)}function Br(e,t){var n=t.cx,r=t.cy;return Ut({},e,{templateId:e.id,dim:Ut({},e.dim,{cx:n,cy:r})})}function Lr(e,t,n,r,o){var i,a=n.dim.cx;return[n].concat(function n(i,c,u){var l=i.map(function(e){var n=e.id;return t.filter(function(e){return e.from.id===n})});var p=Nr(l);var d=p.reduce(function(e,t){var n;return Ut({},e,((n={})[t.to.id]=c+1,n))},{});f=d,h=u,d=Object.keys(f).reduce(function(e,t){var n;return void 0!==h[t]?e:Ut({},e,((n={})[t]=f[t],n))},{});var f,h;if(Object.keys(d).length>0){var y=Object.keys(d).map(function(t){return e.find(function(e){return e.id===parseInt(t)})}),v=i[0].dim.cy+s(i)/2,b=v+o+s(y)/2,m=function(e){return e.reduce(function(e,t){var n=Mr(t),r=n.w;n.h;return e+r},0)}(y)+r*(y.length-1),g=a-m/2;return y.forEach(function(e){var t=Mr(e),n=t.w;t.h;e.dim.cx=g+n/2,g=g+n+r,e.dim.cy=b}),y.concat(n(y,c+1,Ut({},u,d)))}return[]}([n],0,((i={})[n.id]=0,i)));function s(e){return e.reduce(function(e,t){var n=Mr(t),r=(n.w,n.h);return Math.max(e,r)},0)}}function Wr(e){return"function"===typeof e}var Gr=!1,Yr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Gr=e},get useDeprecatedSynchronousErrorHandling(){return Gr}};function Xr(e){setTimeout(function(){throw e})}var Hr={closed:!0,next:function(e){},error:function(e){if(Yr.useDeprecatedSynchronousErrorHandling)throw e;Xr(e)},complete:function(){}},Kr=Array.isArray||function(e){return e&&"number"===typeof e.length};function $r(e){return null!=e&&"object"===typeof e}var Fr,zr={e:{}};function qr(){try{return Fr.apply(this,arguments)}catch(e){return zr.e=e,zr}}function Jr(e){return Fr=e,qr}function Qr(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}Qr.prototype=Object.create(Error.prototype);var Zr=Qr,eo=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(Wr(o))Jr(o).call(this)===zr&&(t=!0,e=e||(zr.e instanceof Zr?to(zr.e.errors):[zr.e]));if(Kr(i))for(a=-1,s=i.length;++a<s;){var c=i[a];if($r(c))if(Jr(c.unsubscribe).call(c)===zr){t=!0,e=e||[];var u=zr.e;u instanceof Zr?e=e.concat(to(u.errors)):e.push(u)}}if(t)throw new Zr(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!==typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function to(e){return e.reduce(function(e,t){return e.concat(t instanceof Zr?t.errors:t)},[])}var no="function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ro=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=Hr;break;case 1:if(!n){i.destination=Hr;break}if("object"===typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new oo(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new oo(i,n,r,o)}return i}return Vt(t,e),t.prototype[no]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(eo),oo=function(e){function t(t,n,r,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return Wr(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==Hr&&(Wr((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return Vt(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Yr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Yr.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Xr(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Xr(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Yr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),Yr.useDeprecatedSynchronousErrorHandling)throw n;Xr(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Yr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return Yr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Xr(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(ro);var io="function"===typeof Symbol&&Symbol.observable||"@@observable";function ao(){}var so=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof ro)return e;if(e[no])return e[no]()}return e||t||n?new ro(e,t,n):new ro(Hr)}(e,t,n);if(r?r.call(o,this.source):o.add(this.source||Yr.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Yr.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Yr.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof ro?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=co(t))(function(t,r){var o;o=n.subscribe(function(t){try{e(t)}catch(n){r(n),o&&o.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[io]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:ao)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=co(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function co(e){if(e||(e=Yr.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function uo(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}uo.prototype=Object.create(Error.prototype);var lo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Vt(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(o){n=!0,r=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return Vt(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(eo)),po=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),fo=function(e){function t(n,r){void 0===r&&(r=po.now);var o=e.call(this,n,function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return Vt(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(po),ho=new so(function(e){return e.complete()});function yo(e){return e?function(e){return new so(function(t){return e.schedule(function(){return t.complete()})})}(e):ho}function vo(e){return e&&"function"===typeof e.schedule}var bo=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}};function mo(e,t){return new so(t?function(n){var r=new eo,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:bo(e))}function go(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(vo(n)?e.pop():n=void 0,e.length){case 0:return yo(n);case 1:return n?mo(e,n):function(e){var t=new so(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}(e[0]);default:return mo(e,n)}}var wo=new fo(lo);function xo(e){return e}function Eo(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Eo.prototype=Object.create(Error.prototype);var Oo=Eo;function _o(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}_o.prototype=Object.create(Error.prototype);function So(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new jo(e,t))}}var jo=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new No(e,this.project,this.thisArg))},e}(),No=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return Vt(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(ro),Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ro),Co=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o.index=0,o}return Vt(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ro),Po=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Xr),t}};function To(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var ko=To(),Io=function(e){return function(t){for(var n=e[ko]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"===typeof n.return&&t.add(function(){n.return&&n.return()}),t}},Do=function(e){return function(t){var n=e[io]();if("function"!==typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Ro=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function Mo(e){return e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}var Vo=function(e){if(e instanceof so)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"===typeof e[io])return Do(e);if(Ro(e))return bo(e);if(Mo(e))return Po(e);if(e&&"function"===typeof e[ko])return Io(e);var t=$r(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Uo(e,t,n,r,o){if(void 0===o&&(o=new Co(e,n,r)),!o.closed)return Vo(t)(o)}function Bo(e,t){if(!t)return e instanceof so?e:new so(Vo(e));if(null!=e){if(function(e){return e&&"function"===typeof e[io]}(e))return function(e,t){return new so(t?function(n){var r=new eo;return r.add(t.schedule(function(){var o=e[io]();r.add(o.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:Do(e))}(e,t);if(Mo(e))return function(e,t){return new so(t?function(n){var r=new eo;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:Po(e))}(e,t);if(Ro(e))return mo(e,t);if(function(e){return e&&"function"===typeof e[ko]}(e)||"string"===typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new so(t?function(n){var r,o=new eo;return o.add(function(){r&&"function"===typeof r.return&&r.return()}),o.add(t.schedule(function(){r=e[ko](),o.add(t.schedule(function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),o}:Io(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var Lo=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Wo(e,this.project,this.concurrent))},e}(),Wo=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return Vt(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new Co(this,void 0,void 0);this.destination.add(r),Uo(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ao);function Go(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"===typeof n?function(o){return o.pipe(e(function(e,r){return Bo(t(e,r)).pipe(So(function(t,o){return n(e,t,r,o)}))},r))}:("number"===typeof n&&(r=n),function(e){return e.lift(new Lo(t,r))})}(xo,e)}function Yo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&vo(e[1])?Bo(e[0]):Go(1)(go.apply(void 0,e))}function Xo(e,t,n,r){return Wr(n)&&(r=n,n=void 0),r?Xo(e,t,n).pipe(So(function(e){return Kr(e)?r.apply(void 0,e):r(e)})):new so(function(r){!function e(t,n,r,o,i){var a;if(function(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}(t)){var c=t;t.on(n,r),a=function(){return c.off(n,r)}}else if(function(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}(t)){var u=t;t.addListener(n,r),a=function(){return u.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,p=t.length;l<p;l++)e(t[l],n,r,o,i)}o.add(a)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}function Ho(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Yo.apply(void 0,[t].concat(e)))}}function Ko(e,t){return function(n){return n.lift(new $o(e,t))}}var $o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Fo(e,this.predicate,this.thisArg))},e}(),Fo=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return Vt(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(ro);function zo(e){return function(t){return 0===e?yo():t.lift(new qo(e))}}var qo=function(){function e(e){if(this.total=e,this.total<0)throw new Oo}return e.prototype.call=function(e,t){return t.subscribe(new Jo(e,this.total))},e}(),Jo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return Vt(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(ro);function Qo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return vo(o)?(r=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof o&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof so?e[0]:Go(n)(mo(e,r))}.apply(void 0,[t].concat(e)))}}function Zo(e,t){return"function"===typeof t?function(n){return n.pipe(Zo(function(n,r){return Bo(e(n,r)).pipe(So(function(e,o){return t(n,e,r,o)}))}))}:function(t){return t.lift(new ei(e))}}var ei=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new ti(e,this.project))},e}(),ti=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return Vt(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new Co(this,void 0,void 0);this.destination.add(o),this.innerSubscription=Uo(this,e,t,n,o)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t}(Ao);var ni=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new ri(e),r=Uo(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),ri=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return Vt(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Ao);function oi(e){return function(t){return t.lift(new ii(e))}}var ii=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new ai(e,this.predicate))},e}(),ai=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.index=0,r}return Vt(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(ro),si={leading:!0,trailing:!1};function ci(e,t,n){return void 0===t&&(t=wo),void 0===n&&(n=si),function(r){return r.lift(new ui(e,t,n.leading,n.trailing))}}var ui=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new li(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),li=function(e){function t(t,n,r,o,i){var a=e.call(this,t)||this;return a.duration=n,a.scheduler=r,a.leading=o,a.trailing=i,a._hasTrailingValue=!1,a._trailingValue=null,a}return Vt(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(pi,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(ro);function pi(e){e.subscriber.clearThrottle()}function di(e){var t=e.target,n=t.getAttribute("data-id");return{dataType:t.getAttribute("data-type")||void 0,dataId:n?parseInt(n):void 0}}function fi(e){var t=e.target,n=function(e){if(!e)return;var t=e.split(":"),n=t[0],r=t[1],o=t[2];return{type:n,id:parseInt(r),anchor:o}}(t.getAttribute("data-host"));return{dataType:t.getAttribute("data-type")||void 0,dataHost:n}}function hi(e,t,n,r){var o=function(e,t,n){var r=t.x,o=t.y,i=t.w,a=t.h,s=(e.xs||[]).reduce(function(e,t){var o=Cr([t-r,t-(i/2+r),t-(i+r)]);return Math.abs(o)<=n?e.concat([[t,Math.abs(o),o]]):e},[]),c=(e.ys||[]).reduce(function(e,t){var r=Cr([t-o,t-(o+a/2),t-(o+a)]);return Math.abs(r)<=n?e.concat([[t,Math.abs(r),r]]):e},[]);return{xs:s.length<=0?[]:u(s),ys:c.length<=0?[]:u(c)};function u(e){var t=e.sort(function(e,t){return e[1]-t[1]}),n=t[0],r=(n[0],n[1]);return t.filter(function(e){return e[0],e[1]<=r})}}(e,t,n),i={xs:o.xs.map(function(e){var t=e[0];e[1];return t}),ys:o.ys.map(function(e){var t=e[0];e[1];return t})},a=o.xs.length<=0?0:o.xs[0][2],s=o.ys.length<=0?0:o.ys[0][2];return[i,Math.abs(a)<=r?a:0,Math.abs(s)<=r?s:0]}var yi=function(e){function t(t){var n=e.call(this,t)||this;return n.ref=Object(o.createRef)(),n.showOrphanNode=n.showOrphanNode.bind(n),n.hideOrphanNode=n.hideOrphanNode.bind(n),n}return Vt(t,e),t.prototype.showOrphanNode=function(e){this.props.uiStore.showOrphanNode(e)},t.prototype.hideOrphanNode=function(){this.props.uiStore.hideOrphanNode()},t.prototype.componentDidMount=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=e.nodeTemplate,o=this.ref.current,i=document.body,a=Xo(o,"mousedown"),s=Xo(i,"mousemove"),c=Xo(i,"mouseup");this.dragSubs=function(e,t,n,r,o,i){return e.pipe(So(function(e){return{x0:e.clientX,y0:e.clientY,end:!1,snappableGrid:Vr(o.nodes)}}),Zo(function(e){return t.pipe(So(function(t){return Ut({},e,{x:t.clientX,y:t.clientY})}),ci(30),Qo(n.pipe(So(function(t){return Ut({},e,{x:t.clientX,y:t.clientY,mouseup:!0})}),zo(1),Ho(go({finished:!0})))),oi(function(e){return!e.finished}))})).subscribe(function(e){var t,n,a=r.clientXYToPainterXY(e.x,e.y),s=a.x,c=a.y,u=Br(i,{cx:s,cy:c}),l=Mr(u),p=l.w,d=l.h,f={x:u.dim.cx-p/2,y:u.dim.cy-d/2,w:p,h:d},h=hi(e.snappableGrid,f,qt,Jt),y=h[0],v=h[1],b=h[2];if(e.mouseup){o.hideSnappableGrid(),r.hideOrphanNode();var m=r.painterDim,g=Mr(Br(i,{cx:e.x,cy:e.y})),w=g.w,x=g.h,E={x:e.x-w/2+v,y:e.y-x/2+b,w:w,h:x};(t=E).x>=(n=m).x&&t.y>=n.y&&t.x+t.w<=n.x+n.w&&t.y+t.h<=n.y+n.h&&o.addNode(Ut({},u,{dim:Ut({},u.dim,{cx:u.dim.cx+v,cy:u.dim.cy+b})}))}else{o.showSnappableGrid(y);var O=r.painterContainerBox;r.showOrphanNode({node:i,cx:e.x+v-O.x,cy:e.y+b-O.y})}})}(a,s,c,t,n,r)},t.prototype.componnetWillUnmount=function(){this.dragSubs.unsubscribe()},t.prototype.render=function(){var e=this.props.nodeTemplate,t=e.id,n=function(e,t){e.id;var n,r=e.shape,i=e.dim,a=e.label;if(r===Gt.Circle){var s=i.r,c=Ut({},e,{dim:Ut({},i,{cx:s,cy:s})}),u=Object(o.createElement)(Or,{w:2*s,h:2*s,text:a}),l=Ur(c);n=Rr(2*s,2*s,Object(o.createElement)(o.Fragment,null,l,u),t)}else{if(r!==Gt.Rect)throw new Error("\u9519\u8bef\u7684shape");var p=i,d=p.w,f=p.h;c=Ut({},e,{dim:Ut({},i,{cx:d/2,cy:f/2})}),u=Object(o.createElement)(Or,{w:d,h:f,text:a}),l=Ur(c),n=Rr(d,f,Object(o.createElement)(o.Fragment,null,l,u),t)}return n}(e,this.ref);return Object(o.createElement)("div",{key:t},n)},t=Bt([Ln(function(e){return{uiStore:e.uiStore,dataStore:e.dataStore}}),ar],t)}(o.Component),vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.configStore,n=e.dataStore,r=t.nodeTemplates;return Object(o.createElement)("div",{className:Xt,style:{width:200}},Object(o.createElement)("input",{type:"button",onClick:function(){return n.rearrange()},value:"\u81ea\u52a8\u91cd\u6392"}),r.map(function(e){return Object(o.createElement)("div",{className:Ht,key:e.id},Object(o.createElement)(yi,{nodeTemplate:e}))}),Object(o.createElement)("div",{style:{flexGrow:1}}))},t=Bt([Ln(function(e){return{configStore:e.configStore,dataStore:e.dataStore}}),ar],t)}(o.Component),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.edge,n=e.dataStore.getEdgeEndPoints(t.id),r=n.fromXY,i=n.toXY;return[{anchor:"0",cx:0,cy:0},{anchor:"1",cx:Pr({x:r.cx,y:r.cy},{x:i.cx,y:i.cy}),cy:0}].map(function(e){return Object(o.createElement)(mr,Ut({key:e.anchor},e,{dataType:t.type,dataId:t.id}))})},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component),mi=xr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.edge,n=e.dataStore,r=(e.hovered,e._ref),i=t.id,a=t.from,s=t.to,c=n.getEdgeEndPoints(i),u=c.fromXY,l=c.toXY,p=~(n.context.selectedEdgeIds||[]).indexOf(i),d=n.context.hidedEdgeId===i,f={x1:0,y1:0,x2:Pr({x:u.cx,y:u.cy},{x:l.cx,y:l.cy}),y2:0},h=180*Math.atan2(l.cy-u.cy,l.cx-u.cx)/Math.PI,y=d?"#dddddd":"#999999",v=Object(o.createElement)("line",Ut({},f,{strokeWidth:10,stroke:"transparent"})),b=Object(o.createElement)("line",Ut({className:"pd-edge","data-type":Wt.Edge,"data-id":i,stroke:y,markerEnd:"url(#arrow)"},f)),m=Object(o.createElement)("path",{d:"M"+f.x1+","+f.y1+" Q"+f.x2/2+","+f.x2/5+","+f.x2+","+f.y2,fill:"none",strokeWidth:10,stroke:"transparent"}),g=Object(o.createElement)("path",{d:"M"+f.x1+","+f.y1+" Q"+f.x2/2+","+f.x2/5+","+f.x2+","+f.y2,markerEnd:"url(#arrow)",fill:"none",stroke:y}),w="lc"===a.anchor&&"lc"===s.anchor||"rc"===a.anchor&&"rc"===s.anchor;return Object(o.createElement)("g",{ref:r,transform:"translate("+u.cx+", "+u.cy+") rotate("+h+")",onClick:function(){return n.selectEdge(i)}},w?m:v,w?g:b,p&&Object(o.createElement)(bi,{edge:t}))},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component)),gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.oedge,n=e.dataStore.getOrphanEdgeEndPoints(t.id),r=n.fromXY,i=n.toXY;return[{anchor:"0",cx:0,cy:0},{anchor:"1",cx:i.cx-r.cx,cy:i.cy-r.cy}].map(function(e){return Object(o.createElement)(mr,Ut({key:e.anchor},e,{dataType:t.type,dataId:t.id}))})},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component),wi=xr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.render=function(){var e=this.props,t=e.oedge,n=e._ref,r=(e.hovered,e.dataStore),i=r.getOrphanEdgeEndPoints(t.id),a=i.fromXY,s=i.toXY,c=~(r.context.selectedOrphanEdgeIds||[]).indexOf(t.id),u={x1:0,y1:0,x2:s.cx-a.cx,y2:s.cy-a.cy},l=Object(o.createElement)("line",Ut({},u,{strokeWidth:6,stroke:"transparent"}));return Object(o.createElement)("g",{ref:n,transform:"translate("+a.cx+", "+a.cy+")",onClick:function(){return r.selectOrphanEdge(t.id)}},l,Object(o.createElement)("line",Ut({className:"pd-edge","data-type":Wt.OrphanEdge,"data-id":t.id},u,{stroke:"#999999",markerEnd:"url(#arrow)"})),c&&Object(o.createElement)(gi,{oedge:t}))},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component)),xi=function(){return Object(o.createElement)("marker",{id:"arrow",markerWidth:10,markerHeight:10,refX:8,refY:5,orient:"auto",markerUnits:"strokeWidth"},Object(o.createElement)("path",{d:"M2,2 L2,8 L8,5 L2,2",stroke:"#999",fill:"#999"}))};function Ei(e,t,n,r,o){return e.pipe(So(function(e){var t=r.clientXYToPainterXY(e.clientX,e.clientY),n=t.x,o=t.y;return Ut({},fi(e),{x0:n,y0:o})}),Ko(function(e){return e.dataType===Wt.Grip}),So(function(e){var t=e.dataHost,n=o.getElement(t.type,t.id);return Ut({},e,{host:n,pos0:o.anchorXY(n,t.anchor),orphanEdgeId:o.nextOrphanEdgeId()})}),Zo(function(e){return t.pipe(So(function(t){return Ut({},e,r.clientXYToPainterXY(t.clientX,t.clientY))}),ci(30),Qo(n.pipe(So(function(t){return Ut({},e,r.clientXYToPainterXY(t.clientX,t.clientY),{mouseup:!0})}),zo(1),Ho(go({finished:!0})))),oi(function(e){return!e.finished}))})).subscribe(function(e){e.orphanEdgeId,e.x0,e.y0;var t=e.x,n=e.y,r=(e.host,e.pos0,e.dataHost),i=o.findSnappedAnchor(t,n);i&&(i.xy.cx,i.xy.cy),r.type===Wt.Node?e.mouseup?function(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x,e.y,e.host,e.pos0,e.dataHost),o=_i(e,t);t.delOrphanEdge(n),o&&t.addEdge({type:Wt.Edge,from:{id:r.id,anchor:r.anchor},to:{id:o.host.id,anchor:o.anchor}})}(e,o):Oi(e,o):r.type===Wt.Edge&&(e.mouseup?(o.showEdge(r.id),function(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x,e.y,e.host,e.pos0,e.dataHost),o=_i(e,t);if(t.delOrphanEdge(n),o){var i={id:o.host.id,anchor:o.anchor};"0"===r.anchor?t.patchEdge({id:r.id,from:i}):t.patchEdge({id:r.id,to:i})}}(e,o)):(o.hideEdge(r.id),Oi(e,o)))})}function Oi(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x),o=e.y,i=e.host,a=(e.pos0,e.dataHost),s=r,c=o,u=t.findSnappedAnchor(r,o);u&&(s=u.xy.cx,c=u.xy.cy);var l=a.type===Wt.Node?{from:{id:a.id,anchor:a.anchor},to:{cx:s,cy:c}}:"0"===a.anchor?{from:{cx:s,cy:c},to:i.to}:{from:i.from,to:{cx:s,cy:c}},p=l.from,d=l.to;t.upsetOrphanEdge({id:n,type:Wt.OrphanEdge,from:p,to:d})}function _i(e,t){e.orphanEdgeId,e.x0,e.y0;var n,r=e.x,o=e.y,i=(e.host,e.pos0,e.dataHost,t.findSnappedAnchor(r,o));if(!i){var a=t.xyInWhichNode(r,o);a&&(n=function(e,t){return["lc","tc","rc","bc"].reduce(function(n,r){var o=Pr(t,{x:n.xy.cx,y:n.xy.cy}),i=e.shape===Gt.Rect?kr(e.dim,r):Tr(e.dim,r),a=i.cx,s=i.cy,c=Pr(t,{x:a,y:s});return c<o?{host:e,anchor:r,xy:{cx:a,cy:s}}:n},{host:e,anchor:"lc",xy:{cx:1e8,cy:1e9}})}(a,{x:r,y:o}))}return i||n}var Si,ji=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),r={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:n?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)i["f"+a]=111+a;function s(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return c(e,t)}),o=function(e){return r.some(function(t){return u(t,e)})};return null==n?o:o(n)}function c(e,t){var n=t&&t.byKey,o={},i=(e=e.replace("++","+add")).split("+"),a=i.length;for(var s in r)o[r[s]]=!1;var c=!0,u=!1,d=void 0;try{for(var f,h=i[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var y=f.value,v=y.endsWith("?");v&&(y=y.slice(0,-1));var b=p(y),m=r[b];1!==a&&m||(n?o.key=b:o.which=l(y)),m&&(o[m]=!v||null)}}catch(g){u=!0,d=g}finally{try{!c&&h.return&&h.return()}finally{if(u)throw d}}return o}function u(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&(null!=(o="key"===n?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r)return!1}return!0}function l(e){return e=p(e),i[e]||e.toUpperCase().charCodeAt(0)}function p(e){return e=e.toLowerCase(),e=o[e]||e}t.default=s,t.isHotkey=s,t.isCodeHotkey=function(e,t){return s(e,t)},t.isKeyHotkey=function(e,t){return s(e,{byKey:!0},t)},t.parseHotkey=c,t.compareHotkey=u,t.toKeyCode=l,t.toKeyName=p}(Si={exports:{}},Si.exports),Si.exports),Ni=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(ji);ji.isHotkey,ji.isCodeHotkey,ji.isKeyHotkey,ji.parseHotkey,ji.compareHotkey,ji.toKeyCode,ji.toKeyName;var Ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t.prototype.snappableLine=function(e,t){return"x"===e?Ci("x"+t,t,-1e4,t,1e4):Ci("y"+t,-1e4,t,1e4,t)},t.prototype.render=function(){var e=this,t=this.props.dataStore.context.snappableGrid||{},n=t.xs,r=t.ys,i=n?n.map(function(t){return e.snappableLine("x",t)}):null,a=r?r.map(function(t){return e.snappableLine("y",t)}):null;return Object(o.createElement)(o.Fragment,null,i,a)},t=Bt([Ln(function(e){return{dataStore:e.dataStore}}),ar],t)}(o.Component);function Ci(e,t,n,r,i){return Object(o.createElement)("line",{key:e,style:{pointerEvents:"none"},x1:t,x2:r,y1:n,y2:i,stroke:"#1890ff",strokeWidth:1,strokeDasharray:"2 1"})}var Pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t}return Vt(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=Xo(this.ref.current,"mousedown"),o=Xo(document.body,"mousemove"),i=Xo(document.body,"mouseup");r.pipe(So(function(e){var r=t.clientXYToPainterXY(e.clientX,e.clientY);return{x0:r.x,y0:r.y,pos0:n.nodes.map(function(e){return[e.id,{cx:e.dim.cx,cy:e.dim.cy}]})}}),Zo(function(e){return o.pipe(So(function(n){return Ut({},e,t.clientXYToPainterXY(n.clientX,n.clientY))}),(n=i,function(e){return e.lift(new ni(n))}));var n})).subscribe(function(e){var t=e.x0,r=(e.y0,e.x),o=(e.y,e.pos0),i=r-t;n.moveAllNodes(o,i,0)})},t.prototype.componentWillUnmount=function(){},t.prototype.render=function(){var e,t,n=this.props.dataStore,r=n.startNode.dim,i=r.cx,a=r.cy,s={x1:0,y1:0,x2:0,y2:60},c=Ti(s),u=ki(s);if(n.endNode){var l=n.endNode.dim,p=l.cx,d=l.cy,f=Mr(n.endNode),h=(f.w,f.h);e=Ti(y={x1:p-i,y1:d+h+50,x2:p-i,y2:d+h+800}),t=ki(y)}else{var y,v=Mr(n.startNode),b=(v.w,v.h);e=Ti(y={x1:0,y1:a+b+500,x2:0,y2:a+b+800}),t=ki(y)}return Object(o.createElement)("g",{transform:"translate("+i+", 0)",ref:this.ref},c,u,e,t)},t=Bt([Ln(function(e){return{dataStore:e.dataStore,uiStore:e.uiStore}}),ar],t)}(o.Component);function Ti(e){return Object(o.createElement)("line",Ut({},e,{strokeWidth:10,stroke:"transparent",style:{cursor:"ew-resize"}}))}function ki(e){return Object(o.createElement)("line",Ut({},e,{strokeWidth:2,stroke:"#cccccc",strokeDasharray:"10 5 5 5",style:{pointerEvents:"none"}}))}var Ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t.handleBackgroundClick=function(){t.props.dataStore.unselectAll()},t}return Vt(t,e),t.prototype.getNodesView=function(e){return e.map(function(e){return function(e){var t=e.id,n=e.shape;if(n===Gt.Rect)return Object(o.createElement)(_r,{key:t,node:e});if(n===Gt.Circle)return Object(o.createElement)(jr,{key:e.id,node:e});throw new Error("\u9519\u8bef\u7684node shape:"+n)}(e)})},t.prototype.getEdgesView=function(e){return e.map(function(e){return Object(o.createElement)(mi,{key:e.id,edge:e})})},t.prototype.getOrphanEdgesView=function(e){return(e||[]).map(function(e){return Object(o.createElement)(wi,{key:e.id,oedge:e})})},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.uiStore,r=t.dataStore,o=this.ref.current,i=Xo(o,"mousedown"),a=Xo(document.body,"mousemove"),s=Xo(document.body,"mouseup"),c=Xo(document.body,"keydown");this.keydown$=function(e,t){return e.subscribe(function(e){Ni("esc",e)?t.unselectAll():Ni(["del","backspace"],e)&&t.delSelected()})}(c,r),this.dragNode$=function(e,t,n,r,o){return e.pipe(So(function(e){var t=r.clientXYToPainterXY(e.clientX,e.clientY),n=t.x,o=t.y;return Ut({},di(e),{x0:n,y0:o})}),Ko(function(e){return e.dataType===Wt.Node}),So(function(e){var t=o.getElement(e.dataType,e.dataId);return Ut({},e,{element:t,pos0:o.getElementPos(t),snappableGrid:Vr(o.nodes,t.id)})}),Zo(function(e){return t.pipe(So(function(t){return Ut({},e,r.clientXYToPainterXY(t.clientX,t.clientY))}),ci(30),Qo(n.pipe(So(function(t){return Ut({},e,r.clientXYToPainterXY(t.clientX,t.clientY),{mouseup:!0})}),zo(1),Ho(go({finished:!0})))),oi(function(e){return!e.finished}))})).subscribe(function(e){var t=e.x0,n=e.x,r=e.y,i=e.y0,a=e.element,s=e.pos0,c=(e.snappableGrid,s.cx+(n-t)),u=s.cy+(r-i),l=Mr(a),p=l.w,d=l.h,f={x:c-p/2,y:u-d/2,w:p,h:d},h=hi(e.snappableGrid,f,qt,Jt),y=h[0],v=h[1],b=h[2];o.showSnappableGrid(y),o.repositionNode({element:a,newPos:{cx:c+v,cy:u+b}}),e.mouseup&&o.hideSnappableGrid()})}(i,a,s,n,r),this.dragGrip$=Ei(i,a,s,n,r);var u=Xo(o,"dblclick").pipe(So(function(e){return di(e)}),Ko(function(e){var t=e.dataType;e.dataId;return t===Wt.Node}));this.activeNode$=u.subscribe(function(t){t.dataType;var n=t.dataId;return e.props.dataStore.events.onActiveNode(n)})},t.prototype.componentWillUnmount=function(){this.dragNode$.unsubscribe(),this.dragGrip$.unsubscribe(),this.keydown$.unsubscribe(),this.activeNode$.unsubscribe()},t.prototype.render=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=e.configStore,i=t.painterDim,a=i.w,s=(i.h,n),c=s.nodes,u=s.edges,l=s.orphanEdges,p=r.canvas,d=p&&p.background||"transparent",f=this.getNodesView(c),h=this.getEdgesView(u),y=this.getOrphanEdgesView(l);return Rr(a,5e3,Object(o.createElement)(o.Fragment,null,Object(o.createElement)(xi,null),Object(o.createElement)("rect",{className:"svg-background-rect",width:"100%",height:"100%",fill:d,onClick:this.handleBackgroundClick}),Object(o.createElement)(Pi,null),f,h,y,Object(o.createElement)(Ai,null)),this.ref)},t=Bt([Ln(function(e){return{uiStore:e.uiStore,configStore:e.configStore,dataStore:e.dataStore}}),ar],t)}(o.Component),Di={cx:-1e5,cy:-1e5,node:void 0},Ri=function(){function e(){this.windowDim={width:window.innerWidth,height:window.innerHeight},this.painterContainerBox={x:0,y:0,w:300,h:300},this.painterScrollTop=0,this.orphanNodeInfo=Di}return Object.defineProperty(e.prototype,"painterDim",{get:function(){return{x:200+this.painterContainerBox.x,y:this.painterContainerBox.y,w:this.painterContainerBox.w-200,h:this.painterContainerBox.h}},enumerable:!0,configurable:!0}),e.prototype.resetWindowDim=function(){this.windowDim={width:window.innerWidth,height:window.innerHeight}},e.prototype.resetPainterContainerBox=function(e){this.painterContainerBox=e},e.prototype.showOrphanNode=function(e){this.orphanNodeInfo=e},e.prototype.hideOrphanNode=function(){this.orphanNodeInfo=Di},e.prototype.resetPainterScrollTop=function(e){this.painterScrollTop=e},e.prototype.clientXYToPainterXY=function(e,t){return{x:e-this.painterDim.x,y:t-(this.painterDim.y-this.painterScrollTop)}},Bt([$.struct],e.prototype,"windowDim",void 0),Bt([$.struct],e.prototype,"painterContainerBox",void 0),Bt([J.struct],e.prototype,"painterDim",null),Bt([Ge],e.prototype,"resetWindowDim",null),Bt([Ge],e.prototype,"resetPainterContainerBox",null),Bt([$.struct],e.prototype,"orphanNodeInfo",void 0),Bt([Ge],e.prototype,"showOrphanNode",null),Bt([Ge],e.prototype,"hideOrphanNode",null),Bt([Ge],e.prototype,"resetPainterScrollTop",null),e}(),Mi=function(){function e(e){this.canvas=e.canvas||{},this.rearrange=e.rearrange,this.nodeTemplates=zt.concat(e.nodeTemplates).sort(function(e,t){return e.id-t.id})}return Object.defineProperty(e.prototype,"config",{get:function(){return{canvas:this.canvas,nodeTemplates:this.nodeTemplates}},enumerable:!0,configurable:!0}),Bt([$],e.prototype,"canvas",void 0),Bt([$],e.prototype,"rearrange",void 0),Bt([$],e.prototype,"nodeTemplates",void 0),Bt([J],e.prototype,"config",null),e}();function Vi(e){return e&&0!==e.length?e.reduce(function(e,t){return e<t.id?t.id:e},-1e4)+1:1}var Ui=function(){function e(e,t,n){this.context={snappableGrid:{xs:[],ys:[]}},this.nodes=[],this.edges=[],this.orphanEdges=[],this.events=n;var r=t.nodeTemplates;this.nodes=(e.nodes||[]).sort(function(e,t){return e.id-t.id}).map(function(e){var t=e.templateId,n=r.find(function(e){return e.id===t});return{id:e.id,type:e.type,label:e.label||n.label,shape:n.shape,templateId:t,dim:Ut({},n.dim,e.dim)}}),this.edges=(e.edges||[]).sort(function(e,t){return e.id-t.id})}return Object.defineProperty(e.prototype,"startNode",{get:function(){return this.nodes.find(function(e){return e.templateId===$t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endNode",{get:function(){return this.nodes.find(function(e){return e.templateId===Ft})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){var e=this;return Nr(this.nodes.map(function(t){return["lc","tc","rc","bc"].map(function(n){return{host:t,anchor:n,xy:e.anchorXY(t,n)}})}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return{nodes:this.nodes,edges:this.edges}},enumerable:!0,configurable:!0}),e.prototype.addNode=function(e){if((e.templateId!==$t||!this.getNode($t))&&(e.templateId!==Ft||!this.getNode(Ft))){if(e.templateId===Ft){var t=this.startNode.dim.cx;e=Ut({},e,{dim:Ut({},e.dim,{cx:t})})}this.nodes.push(Ut({},e,{id:Vi(this.nodes)}))}},e.prototype.addEdge=function(e){var t=e.from,n=e.to;t.id===n.id||this.findEdgeByStartAndEndNode(t.id,n.id)||this.edges.push(Ut({},e,{id:Vi(this.edges)}))},e.prototype.patchNode=function(e){var t=e.id,n=this.getNode(t);Object.assign(n,e)},e.prototype.patchEdge=function(e){var t=e.id,n=this.getEdge(t),r=Ut({},n,e);if(r.from.id!==r.to.id){var o=this.findEdgeByStartAndEndNode(r.from.id,r.to.id);o&&o.id!==t||Object.assign(n,e)}},e.prototype.repositionNode=function(e){var t=e.element,n=e.newPos;if(t.type!==Wt.Node)throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+t.type);t.id;this.nodes.forEach(function(e){e.id===t.id&&(e.dim=Ut({},e.dim,n))})},e.prototype.moveAllNodes=function(e,t,n){this.nodes=this.nodes.map(function(r){var o=e.find(function(e){var t=e[0];e[1];return t===r.id}),i=(o[0],o[1]);return Ut({},r,{dim:Ut({},r.dim,{cx:i.cx+t,cy:i.cy+n})})})},e.prototype.upsetOrphanEdge=function(e){var t=this.getOrphanEdge(e.id);t?Object.assign(t,e):this.orphanEdges.push(e)},e.prototype.selectNode=function(e){this.context.selectedEdgeIds=[],this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[e]},e.prototype.selectEdge=function(e){this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[e]},e.prototype.selectOrphanEdge=function(e){this.context.selectedOrphanEdgeIds=[e],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[]},e.prototype.unselectAll=function(){this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[],this.context.snappableGrid={xs:[],ys:[]}},e.prototype.delSelected=function(){var e=this,t=this.context,n=t.selectedOrphanEdgeIds,r=t.selectedNodeIds,o=t.selectedEdgeIds;(n||[]).forEach(function(t){return e.delOrphanEdge(t)}),(o||[]).forEach(function(t){return e.delEdge(t)}),(r||[]).forEach(function(t){return e.delNode(t)}),this.unselectAll()},e.prototype.delNode=function(e){e!==$t&&(this.nodes=this.nodes.filter(function(t){return t.id!==e}),this.delEdgeOnNode(e),this.events.onDelNode(e))},e.prototype.delEdge=function(e){this.edges=this.edges.filter(function(t){return t.id!==e})},e.prototype.delEdgeOnNode=function(e){this.edges=this.edges.filter(function(t){return t.from.id!==e&&t.to.id!==e})},e.prototype.delOrphanEdge=function(e){this.orphanEdges=(this.orphanEdges||[]).filter(function(t){return t.id!==e}),this.context.selectedOrphanEdgeIds=(this.context.selectedOrphanEdgeIds||[]).filter(function(t){return e!==e})},e.prototype.hideEdge=function(e){this.context.hidedEdgeId=e},e.prototype.showEdge=function(e){this.context.hidedEdgeId===e&&delete this.context.hidedEdgeId},e.prototype.showSnappableGrid=function(e){this.context.snappableGrid=e},e.prototype.hideSnappableGrid=function(){delete this.context.snappableGrid},e.prototype.rearrange=function(){var e=this.configStore.config.rearrange,t=e.hGap,n=e.vGap;this.nodes=Lr(this.nodes,this.edges,this.startNode,t,n)},e.prototype.findEdgeByStartAndEndNode=function(e,t){return this.edges.find(function(n){return n.from.id===e&&n.to.id===t})},e.prototype.getElement=function(e,t){if(e===Wt.Node)return this.nodes.find(function(e){return e.id===t});if(e===Wt.Edge)return this.edges.find(function(e){return e.id===t});throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+e)},e.prototype.getElementPos=function(e){if(e.type===Wt.Node){var t=e;return{cx:t.dim.cx,cy:t.dim.cy}}throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+e.type)},e.prototype.anchorXY=function(e,t){if(e.type===Wt.Node)return Ir(e,t);if(e.type===Wt.Edge)return function(e,t,n){var r="0"===t?e.from:e.to,o=r.id,i=r.anchor;return Ir(n.find(function(e){return e.id===o}),i)}(e,t,this.nodes);throw new Error("\u9519\u8bef\u7684hostType:"+e.type)},e.prototype.getNode=function(e){return this.nodes.find(function(t){return t.id===e})},e.prototype.getEdge=function(e){return this.edges.find(function(t){var n=t.id;return e===n})},e.prototype.getOrphanEdge=function(e){return this.orphanEdges.find(function(t){var n=t.id;return e===n})},e.prototype.getOrphanEdgeEndPoints=function(e){var t=this.orphanEdges.find(function(t){var n=t.id;return e===n});if(!t)throw new Error("oedgeId\u65e0\u6548:"+e);var n=t.from,r=t.to;return{fromXY:n.anchor?Dr(this.nodes,n.id,n.anchor):n,toXY:r.anchor?Dr(this.nodes,r.id,r.anchor):r}},e.prototype.getEdgeEndPoints=function(e){var t=this.edges.find(function(t){var n=t.id;return e===n});if(!t)throw new Error("edgeId\u65e0\u6548:"+e);var n=t.from,r=t.to;return{fromXY:Dr(this.nodes,n.id,n.anchor),toXY:Dr(this.nodes,r.id,r.anchor)}},e.prototype.nextOrphanEdgeId=function(){return Vi(this.orphanEdges)},e.prototype.findSnappedAnchor=function(e,t){return this.anchors.find(function(n){var r=n.xy;return Pr({x:r.cx,y:r.cy},{x:e,y:t})<=5})},e.prototype.xyInWhichNode=function(e,t){return this.nodes.find(function(n){var r=n.dim,o=n.shape,i=r,a=i.cx,s=i.cy;if(o===Gt.Rect){var c=r,u=c.w,l=c.h;return e>=a-u/2&&e<=a+u/2&&t>=s-l/2&&t<=s+l/2}if(o===Gt.Circle){var p=r.r;return Pr({x:e,y:t},{x:a,y:s})<=p}throw new Error("\u9519\u8bef\u7684shape: "+o)})},Bt([$],e.prototype,"context",void 0),Bt([$],e.prototype,"nodes",void 0),Bt([$],e.prototype,"edges",void 0),Bt([$],e.prototype,"orphanEdges",void 0),Bt([J],e.prototype,"startNode",null),Bt([J],e.prototype,"endNode",null),Bt([J],e.prototype,"anchors",null),Bt([J],e.prototype,"data",null),Bt([Ge],e.prototype,"addNode",null),Bt([Ge],e.prototype,"addEdge",null),Bt([Ge],e.prototype,"patchNode",null),Bt([Ge],e.prototype,"patchEdge",null),Bt([Ge],e.prototype,"repositionNode",null),Bt([Ge],e.prototype,"moveAllNodes",null),Bt([Ge],e.prototype,"upsetOrphanEdge",null),Bt([Ge],e.prototype,"selectNode",null),Bt([Ge],e.prototype,"selectEdge",null),Bt([Ge],e.prototype,"selectOrphanEdge",null),Bt([Ge],e.prototype,"unselectAll",null),Bt([Ge],e.prototype,"delSelected",null),Bt([Ge],e.prototype,"delNode",null),Bt([Ge],e.prototype,"delEdge",null),Bt([Ge],e.prototype,"delEdgeOnNode",null),Bt([Ge],e.prototype,"delOrphanEdge",null),Bt([Ge],e.prototype,"hideEdge",null),Bt([Ge],e.prototype,"showEdge",null),Bt([Ge],e.prototype,"showSnappableGrid",null),Bt([Ge],e.prototype,"hideSnappableGrid",null),Bt([Ge],e.prototype,"rearrange",null),e}(),Bi="styles_pd-orphan-node-container__acyIn";Lt(".styles_pd-orphan-node-container__acyIn {\n  position: absolute;\n}\n");var Li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t}return Vt(t,e),t.prototype.render=function(){var e=this.props.uiStore.orphanNodeInfo,t=e.cx,n=e.cy,r=e.node;if(!r)return null;var i=Mr(r),a=i.w,s=i.h,c=Ut({},r,{dim:Ut({},r.dim,{cx:a/2,cy:s/2})}),u=Object(o.createElement)(Or,{w:a,h:s,text:r.label||""}),l=Ur(c);return Object(o.createElement)("div",{className:Bi,style:{left:t-a/2,top:n-s/2}},Rr(a,s,Object(o.createElement)(o.Fragment,null,l,u),this.ref))},t=Bt([Ln(function(e){return{uiStore:e.uiStore}}),ar],t)}(o.Component);Ke({enforceActions:"observed"});var Wi=function(e){function t(t){var n=e.call(this,t)||this;n.painterContainerRef=i.a.createRef(),n.painterWrapperRef=i.a.createRef(),n.uiStore=new Ri;var r=n.props,o=r.config,a=r.data,s=r.events;return n.configStore=new Mi(Ut({},Zt,o)),n.dataStore=new Ui(a||Qt,n.configStore,s),n.onResize=n.onResize.bind(n),n.handlePainterWrapperScroll=n.handlePainterWrapperScroll.bind(n),n}return Vt(t,e),t.prototype.onResize=function(){this.uiStore.resetWindowDim();var e=this.painterContainerRef.current.getBoundingClientRect(),t=e.left,n=e.top,r=e.width,o=e.height;this.uiStore.resetPainterContainerBox({x:t,y:n,w:r,h:o})},t.prototype.render=function(){return i.a.createElement(fr,{uiStore:this.uiStore,configStore:this.configStore,dataStore:this.dataStore},i.a.createElement("div",{ref:this.painterContainerRef,className:Yt},i.a.createElement(vi,null),i.a.createElement("div",{ref:this.painterWrapperRef,className:Kt,style:{width:this.uiStore.painterDim.w,height:this.uiStore.painterDim.h}},i.a.createElement(Ii,null)),i.a.createElement(Li,null)))},t.prototype.componentDidMount=function(){this.onResize(),window.addEventListener("resize",this.onResize),this.painterWrapperRef.current.addEventListener("scroll",this.handlePainterWrapperScroll)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.painterWrapperRef.current.removeEventListener("scroll",this.handlePainterWrapperScroll)},t.prototype.handlePainterWrapperScroll=function(){var e=this.painterWrapperRef.current;this.uiStore.resetPainterScrollTop(e.scrollTop)},t.prototype.getController=function(){var e=this.dataStore;return{rearrange:e.rearrange.bind(e),getAllAssoc:function(){return e.edges.map(function(e){return{fromNodeId:e.from.id,toNodeId:e.to.id}})},markNode:e.patchNode.bind(e),getDesignerData:function(){return{nodes:tt(e.nodes),edges:tt(e.edges)}}}},t=Bt([ar],t)}(i.a.Component);Ke({enforceActions:"observed"}),t.e=Wi}).call(this,n(22),n(4))},13:function(e,t,n){e.exports=n(27)},18:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(7),a=n.n(i),s=(n(18),n(8)),c=n(9),u=n(11),l=n(10),p=n(12),d=(n(20),n(1)),f=[{id:1,type:d.a.Node,label:"\u64cd\u4f5c",shape:d.c.Rect,dim:{w:100,h:30}}],h={nodes:[{id:d.d,type:d.a.Node,templateId:d.d,dim:{cx:300,cy:100,r:30}},{id:d.b,type:d.a.Node,templateId:d.b,dim:{cx:300,cy:800,r:30}},{id:1,type:d.a.Node,label:"\u7279\u6b8a\u540d\u79f0",templateId:1,dim:{cx:300,cy:300,w:100,h:50}},{id:2,type:d.a.Node,templateId:1,dim:{cx:300,cy:500,w:100,h:50}},{id:3,type:d.a.Node,templateId:1,dim:{cx:300,cy:700,w:100,h:50}}],edges:[{id:1,type:d.a.Edge,from:{id:d.d,anchor:"bc"},to:{id:1,anchor:"tc"}},{id:2,type:d.a.Edge,from:{id:1,anchor:"bc"},to:{id:2,anchor:"tc"}},{id:3,type:d.a.Edge,from:{id:2,anchor:"bc"},to:{id:3,anchor:"tc"}},{id:5,type:d.a.Edge,from:{id:3,anchor:"bc"},to:{id:d.b,anchor:"tc"}}]},y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).config={canvas:{background:"#ffffff"},nodeTemplates:f},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(d.e,{config:this.config,data:h,events:{}}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.c1e20ce4.chunk.js.map