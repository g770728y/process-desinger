(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";(function(e,r){n.d(t,"d",function(){return Gt}),n.d(t,"b",function(){return Yt}),n.d(t,"a",function(){return Mt}),n.d(t,"c",function(){return Vt});var o=n(0),i=n.n(o),a=n(3),s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};var c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function u(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function l(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var p="An invariant failed, however the error is obfuscated because this is an production build.",d=[];Object.freeze(d);var f={};function h(){return++we.mobxGuid}function y(e){throw v(!1,e),"X"}function v(e,t){if(!e)throw new Error("[mobx] "+(t||p))}Object.freeze(f);function b(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var m=function(){};function g(e){return null!==e&&"object"===typeof e}function w(e){if(null===e||"object"!==typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function x(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function E(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return g(e)&&!0===e[n]}}function O(e){return e instanceof Map}function _(e){return null===e?null:"object"===typeof e?""+e:e}var S=Symbol("mobx administration"),j=function(){function e(e){void 0===e&&(e="Atom@"+h()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=te.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.reportObserved=function(){return Ne(this)},e.prototype.reportChanged=function(){Se(),function(e){if(e.lowestObserverState===te.STALE)return;e.lowestObserverState=te.STALE,e.observers.forEach(function(t){t.dependenciesState===te.UP_TO_DATE&&(t.isTracing!==re.NONE&&Ae(t,e),t.onBecomeStale()),t.dependenciesState=te.STALE})}(this),je()},e.prototype.toString=function(){return this.name},e}(),N=E("Atom",j);function A(e,t,n){void 0===t&&(t=m),void 0===n&&(n=m);var r,o=new j(e);return t!==m&&Xe("onBecomeObserved",o,t,r),n!==m&&function(e,t,n){Xe("onBecomeUnobserved",e,t,n)}(o,n),o}var P={identity:function(e,t){return e===t},structural:function(e,t){return St(e,t)},default:function(e,t){return Object.is(e,t)}},T=Symbol("mobx did run lazy initializers"),C=Symbol("mobx pending decorators"),k={},I={};function D(e){if(!0!==e[T]){var t=e[C];if(t)for(var n in x(e,T,!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function R(e,t){return function(){var n,r,o=function(r,o,i,a){if(!0===a)return t(r,o,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,C)){var s=r[C];x(r,C,c({},s))}return r[C][o]={prop:o,propertyCreator:t,descriptor:i,decoratorTarget:r,decoratorArguments:n},function(e,t){var n=t?k:I;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return D(this),this[e]},set:function(t){D(this),this[e]=t}})}(o,e)};return(2===(r=arguments).length||3===r.length)&&"string"===typeof r[1]||4===r.length&&!0===r[3]?(n=d,o.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),o)}}function M(e,t,n){return qe(e)?e:Array.isArray(e)?F.array(e,{name:n}):w(e)?F.object(e,void 0,{name:n}):O(e)?F.map(e,{name:n}):e}function V(e){return e}function U(t){v(t);var n=R(!0,function(e,n,r,o,i){var a=r?r.initializer?r.initializer.call(e):r.value:void 0;vt(e).addObservableProp(n,a,t)}),r=("undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:""}),n);return r.enhancer=t,r}var B={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function L(e){return null===e||void 0===e?B:"string"===typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(B);var W=U(M),G=U(function(e,t,n){return void 0===e||null===e?e:xt(e)||pt(e)||ht(e)?e:Array.isArray(e)?F.array(e,{name:n,deep:!1}):w(e)?F.object(e,void 0,{name:n,deep:!1}):O(e)?F.map(e,{name:n,deep:!1}):y(!1)}),Y=U(V),X=U(function(e,t,n){return St(e,t)?t:e});function H(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?V:M}var $={box:function(e,t){arguments.length>2&&K("box");var n=L(t);return new oe(e,H(n),n.name)},array:function(e,t){arguments.length>2&&K("array");var n=L(t);return function(e,t,n,r){void 0===n&&(n="ObservableArray@"+h());void 0===r&&(r=!1);var o=new st(n,t,r);i=o.values,a=S,s=o,Object.defineProperty(i,a,{enumerable:!1,writable:!1,configurable:!0,value:s});var i,a,s;var c=new Proxy(o.values,at);if(o.proxy=c,e&&e.length){var u=Z(!0);o.spliceWithArray(0,0,e),ee(u)}return c}(e,H(n),n.name)},map:function(e,t){arguments.length>2&&K("map");var n=L(t);return new ft(e,H(n),n.name)},object:function(e,t,n){"string"===typeof arguments[1]&&K("object");var r=L(n);if(!1===r.proxy)return $e({},e,t,r);var o=Fe(r),i=function(e){var t=new Proxy(e,Ze);return e[S].proxy=t,t}($e({},void 0,void 0,r));return Ke(i,e,t,o),i},ref:Y,shallow:G,deep:W,struct:X},F=function(e,t,n){if("string"===typeof arguments[1])return W.apply(null,arguments);if(qe(e))return e;var r=w(e)?F.object(e,t,n):Array.isArray(e)?F.array(e,t):O(e)?F.map(e,t):e;if(r!==e)return r;y(!1)};function K(e){y("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys($).forEach(function(e){return F[e]=$[e]});var z=R(!1,function(e,t,n,r,o){var i=n.get,a=n.set,s=o[0]||{};vt(e).addComputedProp(e,t,c({get:i,set:a,context:e},s))}),q=z({equals:P.structural}),J=function(e,t,n){if("string"===typeof t)return z.apply(null,arguments);if(null!==e&&"object"===typeof e&&1===arguments.length)return z.apply(null,arguments);var r="object"===typeof t?t:{};return r.get=e,r.set="function"===typeof t?t:r.set,r.name=r.name||e.name||"",new ie(r)};function Q(e,t){var n=function(){return function(e,t,n,r){var o=function(e,t,n,r){var o=Me()&&!!e,i=0;var a=he();Se();var s=Z(!0);return{prevDerivation:a,prevAllowStateChanges:s,notifySpy:o,startTime:i}}(e);try{return t.apply(n,r)}finally{!function(e){ee(e.prevAllowStateChanges),je(),ye(e.prevDerivation),e.notifySpy,0}(o)}}(e,t,this,arguments)};return n.isMobxAction=!0,n}function Z(e){var t=we.allowStateChanges;return we.allowStateChanges=e,t}function ee(e){we.allowStateChanges=e}J.struct=q;var te,ne,re,oe=function(e){function t(t,n,r,o){void 0===r&&(r="ObservableValue@"+h()),void 0===o&&(o=!0);var i=e.call(this,r)||this;return i.enhancer=n,i.hasUnreportedChange=!1,i.value=n(t,void 0,r),o&&Me(),i}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==we.UNCHANGED){Me();0,this.setNewValue(e)}},t.prototype.prepareNewValue=function(e){if(le(this),et(this)){var t=nt(this,{object:this,type:"update",newValue:e});if(!t)return we.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:we.UNCHANGED},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),rt(this)&&it(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return tt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),ot(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return _(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(j),ie=(E("ObservableValue",oe),function(){function e(e){this.dependenciesState=te.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=te.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+h(),this.value=new se(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=re.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+h(),e.set&&(this.setter=Q(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?P.structural:P.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==te.UP_TO_DATE)return;e.lowestObserverState=te.POSSIBLY_STALE,e.observers.forEach(function(t){t.dependenciesState===te.UP_TO_DATE&&(t.dependenciesState=te.POSSIBLY_STALE,t.isTracing!==re.NONE&&Ae(t,e),t.onBecomeStale())})}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},e.prototype.get=function(){this.isComputing&&y("Cycle detected in computation "+this.name+": "+this.derivation),0!==we.inBatch||0!==this.observers.size||this.keepAlive?(Ne(this),ue(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===te.STALE)return;e.lowestObserverState=te.STALE,e.observers.forEach(function(t){t.dependenciesState===te.POSSIBLY_STALE?t.dependenciesState=te.STALE:t.dependenciesState===te.UP_TO_DATE&&(e.lowestObserverState=te.UP_TO_DATE)})}(this)):ue(this)&&(this.warnAboutUntrackedRead(),Se(),this.value=this.computeValue(!1),je());var e=this.value;if(ce(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ce(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){v(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else v(!1,!1)},e.prototype.trackAndCompute=function(){Me();var e=this.value,t=this.dependenciesState===te.NOT_TRACKING,n=this.computeValue(!0),r=t||ce(e)||ce(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,we.computationDepth++,e)t=pe(this,this.derivation,this.scope);else if(!0===we.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new se(n)}return we.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(de(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,o=void 0;return function(e,t){void 0===t&&(t=f);0;var n,r=t&&t.name||e.name||"Autorun@"+h();if(t.scheduler||t.delay){var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ye}(t),i=!1;n=new Pe(r,function(){i||(i=!0,o(function(){i=!1,n.isDisposed||n.track(a)}))},t.onError)}else n=new Pe(r,function(){this.track(a)},t.onError);function a(){e(n)}return n.schedule(),n.getDisposer()}(function(){var i=n.get();if(!r||t){var a=he();e({type:"update",object:n,newValue:i,oldValue:o}),ye(a)}r=!1,o=i})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return _(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}()),ae=E("ComputedValue",ie);(ne=te||(te={}))[ne.NOT_TRACKING=-1]="NOT_TRACKING",ne[ne.UP_TO_DATE=0]="UP_TO_DATE",ne[ne.POSSIBLY_STALE=1]="POSSIBLY_STALE",ne[ne.STALE=2]="STALE",function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(re||(re={}));var se=function(){return function(e){this.cause=e}}();function ce(e){return e instanceof se}function ue(e){switch(e.dependenciesState){case te.UP_TO_DATE:return!1;case te.NOT_TRACKING:case te.STALE:return!0;case te.POSSIBLY_STALE:for(var t=he(),n=e.observing,r=n.length,o=0;o<r;o++){var i=n[o];if(ae(i)){if(we.disableErrorBoundaries)i.get();else try{i.get()}catch(a){return ye(t),!0}if(e.dependenciesState===te.STALE)return ye(t),!0}}return ve(e),ye(t),!1}}function le(e){var t=e.observers.size>0;we.computationDepth>0&&t&&y(!1),we.allowStateChanges||!t&&"strict"!==we.enforceActions||y(!1)}function pe(e,t,n){ve(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++we.runId;var r,o=we.trackingDerivation;if(we.trackingDerivation=e,!0===we.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(i){r=new se(i)}return we.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=te.UP_TO_DATE,o=0,i=e.unboundDepsCount,a=0;a<i;a++){var s=n[a];0===s.diffValue&&(s.diffValue=1,o!==a&&(n[o]=s),o++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=o,e.newObserving=null,i=t.length;for(;i--;){var s=t[i];0===s.diffValue&&Oe(s,e),s.diffValue=0}for(;o--;){var s=n[o];1===s.diffValue&&(s.diffValue=0,Ee(s,e))}r!==te.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),r}function de(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Oe(t[n],e);e.dependenciesState=te.NOT_TRACKING}function fe(e){var t=he();try{return e()}finally{ye(t)}}function he(){var e=we.trackingDerivation;return we.trackingDerivation=null,e}function ye(e){we.trackingDerivation=e}function ve(e){if(e.dependenciesState!==te.UP_TO_DATE){e.dependenciesState=te.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=te.UP_TO_DATE}}var be=function(){return function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),me=!0,ge=!1,we=function(){var e=xe();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(me=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new be).version&&(me=!1),me?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new be):(setTimeout(function(){ge||y("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new be)}();function xe(){return"undefined"!==typeof window?window:r}function Ee(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Oe(e,t){e.observers.delete(t),0===e.observers.size&&_e(e)}function _e(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,we.pendingUnobservations.push(e))}function Se(){we.inBatch++}function je(){if(0===--we.inBatch){ke();for(var e=we.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ie&&n.suspend())}we.pendingUnobservations=[]}}function Ne(e){var t=we.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&we.inBatch>0&&_e(e),!1)}function Ae(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===re.BREAK){var n=[];!function e(t,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+t.name);t.dependencies&&t.dependencies.forEach(function(t){return e(t,n,r+1)})}((r=e,ze(Et(r,o))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ie?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r,o}var Pe=function(){function e(e,t,n){void 0===e&&(e="Reaction@"+h()),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.observing=[],this.newObserving=[],this.dependenciesState=te.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+h(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=re.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,we.pendingReactions.push(this),ke())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Se(),this._isScheduled=!1,ue(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Me()}catch(e){this.reportExceptionInDerivation(e)}}je()}},e.prototype.track=function(e){Se();Me();this._isRunning=!0;var t=pe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&de(this),ce(t)&&this.reportExceptionInDerivation(t.cause),je()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(we.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(n,e),Me()&&Ve({type:"error",name:this.name,message:n,error:""+e}),we.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Se(),de(this),je()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[S]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"===typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return we.trackingDerivation;case 1:return Et(e[0]);case 2:return Et(e[0],e[1])}}(e);if(!r)return y(!1);r.isTracing===re.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled");r.isTracing=n?re.BREAK:re.LOG}(this,e)},e}(),Te=100,Ce=function(e){return e()};function ke(){we.inBatch>0||we.isRunningReactions||Ce(Ie)}function Ie(){we.isRunningReactions=!0;for(var e=we.pendingReactions,t=0;e.length>0;){++t===Te&&(console.error("Reaction doesn't converge to a stable state after "+Te+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction()}we.isRunningReactions=!1}var De=E("Reaction",Pe);function Re(e){var t=Ce;Ce=function(n){return e(function(){return t(n)})}}function Me(){return!1}function Ve(e){}function Ue(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Be(){y(!1)}function Le(e){return function(t,n,r){if(r){if(r.value)return{value:Q(e,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Q(e,o.call(this))}}}return function(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){x(this,n,We(e,t))}})}}(e).apply(this,arguments)}}var We=function(e,t,n,r){return 1===arguments.length&&"function"===typeof e?Q(e.name||"<unnamed action>",e):2===arguments.length&&"function"===typeof t?Q(e,t):1===arguments.length&&"string"===typeof e?Le(e):!0!==r?Le(t).apply(null,arguments):void x(e,t,Q(e.name||t,n.value))};function Ge(e,t,n){x(e,t,Q(t,n.bind(e)))}We.bound=function(e,t,n,r){return!0===r?(Ge(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Ge(this,t,n.value||n.initializer.call(this)),this[t]},set:Be}:{enumerable:!1,configurable:!0,set:function(e){Ge(this,t,e)},get:function(){}}};var Ye=function(e){return e()};function Xe(e,t,n,r){var o="string"===typeof n?Et(t,n):Et(t),i="string"===typeof n?r:n,a=e+"Listeners";return o[a]?o[a].add(i):o[a]=new Set([i]),"function"!==typeof o[e]?y(!1):function(){var e=o[a];e&&(e.delete(i),0===e.size&&delete o[a])}}function He(e){var t=e.enforceActions,n=e.computedRequiresReaction,r=e.disableErrorBoundaries,o=e.reactionScheduler;if(void 0!==t){var i=void 0;switch(t){case!0:case"observed":i=!0;break;case!1:case"never":i=!1;break;case"strict":case"always":i="strict";break;default:y("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}we.enforceActions=i,we.allowStateChanges=!0!==i&&"strict"!==i}void 0!==n&&(we.computedRequiresReaction=!!n),!0===e.isolateGlobalState&&((we.pendingReactions.length||we.inBatch||we.isRunningReactions)&&y("isolateGlobalState should be called before MobX is running any reactions"),ge=!0,me&&(0===--xe().__mobxInstanceCount&&(xe().__mobxGlobals=void 0),we=new be)),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),we.disableErrorBoundaries=!!r),o&&Re(o)}function $e(e,t,n,r){var o=Fe(r=L(r));return D(e),vt(e,r.name,o.enhancer),t&&Ke(e,t,n,o),e}function Fe(e){return e.defaultDecorator||(!1===e.deep?Y:W)}function Ke(e,t,n,r){Se();try{for(var o in t){var i=Object.getOwnPropertyDescriptor(t,o);0;var a=(n&&o in n?n[o]:i.get?z:r)(e,o,i,!0);a&&Object.defineProperty(e,o,a)}}finally{je()}}function ze(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=function(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}(e.observing).map(ze)),t}function qe(e){return 1!==arguments.length&&y(!1),function(e,t){return null!==e&&void 0!==e&&(void 0!==t?!!xt(e)&&e[S].values.has(t):xt(e)||!!e[S]||N(e)||De(e)||ae(e))}(e)}function Je(e,t){void 0===t&&(t=void 0),Se();try{return e.apply(t)}finally{je()}}function Qe(e){return e[S]}var Ze={has:function(e,t){if(t===S||"constructor"===t||t===T)return!0;var n=Qe(e);return"string"===typeof t?n.has(t):t in e},get:function(e,t){if(t===S||"constructor"===t||t===T)return e[t];var n=Qe(e),r=n.values.get(t);if(r instanceof j){var o=r.get();return void 0===o&&n.has(t),o}return"string"===typeof t&&n.has(t),e[t]},set:function(e,t,n){return"string"===typeof t&&(function e(t,n,r){if(2!==arguments.length)if(xt(t)){var o=t[S];o.values.get(n)?o.write(n,r):o.addObservableProp(n,r,o.defaultEnhancer)}else if(ht(t))t.set(n,r);else{if(!pt(t))return y(!1);"number"!==typeof n&&(n=parseInt(n,10)),v(n>=0,"Not a valid index: '"+n+"'"),Se(),n>=t.length&&(t.length=n+1),t[n]=r,je()}else{Se();var i=n;try{for(var a in i)e(t,a,i[a])}finally{je()}}}(e,t,n),!0)},deleteProperty:function(e,t){return"string"===typeof t&&(Qe(e).remove(t),!0)},ownKeys:function(e){return Qe(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return y("Dynamic observable objects cannot be frozen"),!1}};function et(e){return void 0!==e.interceptors&&e.interceptors.length>0}function tt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),b(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function nt(e,t){var n=he();try{var r=e.interceptors;if(r)for(var o=0,i=r.length;o<i&&(v(!(t=r[o](t))||t.type,"Intercept handlers should return nothing or a change object"),t);o++);return t}finally{ye(n)}}function rt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function ot(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),b(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function it(e,t){var n=he(),r=e.changeListeners;if(r){for(var o=0,i=(r=r.slice()).length;o<i;o++)r[o](t);ye(n)}}var at={get:function(e,t){return t===S?e[S]:"length"===t?e[S].getArrayLength():"number"===typeof t?ct.get.call(e,t):"string"!==typeof t||isNaN(t)?ct.hasOwnProperty(t)?ct[t]:e[t]:ct.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t?(e[S].setArrayLength(n),!0):"number"===typeof t?(ct.set.call(e,t,n),!0):!isNaN(t)&&(ct.set.call(e,parseInt(t),n),!0)},preventExtensions:function(e){return y("Observable arrays cannot be frozen"),!1}};var st=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new j(e||"ObservableArray@"+h()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return tt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ot(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!==typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var r=this;le(this.atom);var o=this.values.length;if(void 0===e?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),t=1===arguments.length?o-e:void 0===t||null===t?0:Math.max(0,Math.min(t,o-e)),void 0===n&&(n=d),et(this)){var i=nt(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!i)return d;t=i.removedCount,n=i.added}n=0===n.length?n:n.map(function(e){return r.enhancer(e,void 0)});var a=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,a),this.dehanceValues(a)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}([e,t],n));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),o},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&!1,o=rt(this),i=o||r?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),o&&it(this,i)},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&!1,o=rt(this),i=o||r?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&it(this,i)},e}(),ct={intercept:function(e){return this[S].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[S].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[S];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this[S];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(e);case 2:return o.spliceWithArray(e,t)}return o.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[S].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[S];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[S].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[S];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[S],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[S];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[S],r=n.values;if(e<r.length){le(n.atom);var o=r[e];if(et(n)){var i=nt(n,{type:"update",object:this,index:e,newValue:t});if(!i)return;t=i.newValue}(t=n.enhancer(t,o))!==o&&(r[e]=t,n.notifyArrayChildUpdate(e,t,o))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){ct[e]=function(){var t=this[S];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)}});var ut,lt=E("ObservableArrayAdministration",st);function pt(e){return g(e)&&lt(e[S])}var dt={},ft=function(){function e(e,t,n){if(void 0===t&&(t=M),void 0===n&&(n="ObservableMap@"+h()),this.enhancer=t,this.name=n,this[ut]=dt,this._keysAtom=A(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,t){var n=this._has(e);if(et(this)){var r=nt(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(et(this)&&!(r=nt(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=rt(this),r=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return Je(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)}),n&&it(this,r),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);return n?n.setNewValue(t):(n=new oe(t,V,this.name+"."+e+"?",!1),this._hasMap.set(e,n)),n},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==we.UNCHANGED){var r=rt(this),o=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;0,n.setNewValue(t),r&&it(this,o)}},e.prototype._addValue=function(e,t){var n=this;le(this._keysAtom),Je(function(){var r=new oe(t,n.enhancer,n.name+"."+e,!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()});var r=rt(this),o=r?{type:"add",object:this,name:e,newValue:t}:null;r&&it(this,o)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=0,n=Array.from(this.keys());return Pt({next:function(){return t<n.length?{value:e.get(n[t++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,t=0,n=Array.from(this.keys());return Pt({next:function(){if(t<n.length){var r=n[t++];return{value:[r,e.get(r)],done:!1}}return{done:!0}}})},e.prototype[(ut=S,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,r;try{for(var o=u(this),i=o.next();!i.done;i=o.next()){var a=l(i.value,2),s=a[0],c=a[1];e.call(t,c,s,this)}}catch(p){n={error:p}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return ht(e)&&(e=e.toJS()),Je(function(){w(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=l(e,2),r=n[0],o=n[1];return t.set(r,o)}):O(e)?e.forEach(function(e,n){return t.set(n,e)}):null!==e&&void 0!==e&&y("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;Je(function(){fe(function(){var t,n;try{for(var r=u(e.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;e.delete(i)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})})},e.prototype.replace=function(e){var t=this;return Je(function(){var n,r=w(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(e){return l(e,1)[0]}):O(n)||ht(n)?Array.from(n.keys()):y("Cannot get keys from '"+n+"'");Array.from(t.keys()).filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){return t.delete(e)}),t.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var r=u(this),o=r.next();!o.done;o=r.next()){var i=l(o.value,2),a=i[0],s=i[1];n[""+a]=s}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},e.prototype.observe=function(e,t){return ot(this,e)},e.prototype.intercept=function(e){return tt(this,e)},e}(),ht=E("ObservableMap",ft),yt=function(){function e(e,t,n,r){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=r,this.keysAtom=new j(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,r=this.values.get(e);if(r instanceof ie)r.set(t);else{if(et(this)){if(!(i=nt(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=i.newValue}if((t=r.prepareNewValue(t))!==we.UNCHANGED){var o=rt(this),i=o?{type:"update",object:this.proxy||n,oldValue:r.value,name:e,newValue:t}:null;0,r.setNewValue(t),o&&it(this,i)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var r=!!this.values.get(e);return n=new oe(r,V,this.name+"."+e.toString()+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(et(this)){var o=nt(this,{object:this.proxy||r,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var i=new oe(t,n,this.name+"."+e,!1);this.values.set(e,i),t=i.value,Object.defineProperty(r,e,function(e){return bt[e]||(bt[e]={configurable:!0,enumerable:!0,get:function(){return this[S].read(e)},set:function(t){this[S].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var r=this.target;n.name=n.name||this.name+"."+t,this.values.set(t,new ie(n)),(e===r||function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||!1!==n.configurable&&!1!==n.writable}(e,t))&&Object.defineProperty(e,t,function(e){return mt[e]||(mt[e]={configurable:!0,enumerable:!1,get:function(){return gt(this).read(e)},set:function(t){gt(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(et(this))if(!(a=nt(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Se();var n=rt(this),r=this.values.get(e),o=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var i=this.pendingKeys.get(e);i&&i.set(!1)}delete this.target[e];var a=n?{type:"remove",object:this.proxy||t,oldValue:o,name:e}:null;0,n&&it(this,a)}finally{je()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return ot(this,e)},e.prototype.intercept=function(e){return tt(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=rt(this),r=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&it(this,r),this.pendingKeys){var o=this.pendingKeys.get(e);o&&o.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var r=u(this.values),o=r.next();!o.done;o=r.next()){var i=l(o.value,2),a=i[0];i[1]instanceof oe&&n.push(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e}();function vt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=M),Object.prototype.hasOwnProperty.call(e,S))return e[S];w(e)||(t=(e.constructor.name||"ObservableObject")+"@"+h()),t||(t="ObservableObject@"+h());var r=new yt(e,new Map,t,n);return x(e,S,r),r}var bt=Object.create(null),mt=Object.create(null);function gt(e){var t=e[S];return t||(D(e),e[S])}var wt=E("ObservableObjectAdministration",yt);function xt(e){return!!g(e)&&(D(e),wt(e[S]))}function Et(e,t){if("object"===typeof e&&null!==e){if(pt(e))return void 0!==t&&y(!1),e[S].atom;if(ht(e)){var n=e;return void 0===t?n._keysAtom:((r=n._data.get(t)||n._hasMap.get(t))||y(!1),r)}var r;if(D(e),t&&!e[S]&&e[t],xt(e))return t?((r=e[S].values.get(t))||y(!1),r):y(!1);if(N(e)||ae(e)||De(e))return e}else if("function"===typeof e&&De(e[S]))return e[S];return y(!1)}function Ot(e,t){return(void 0!==t?Et(e,t):xt(e)||ht(e)?function e(t,n){return t||y("Expecting some object"),void 0!==n?e(Et(t,n)):N(t)||ae(t)||De(t)?t:ht(t)?t:(D(t),t[S]?t[S]:void y(!1))}(e):Et(e)).name}var _t=Object.prototype.toString;function St(e,t){return jt(e,t)}function jt(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&function(e,t,n,r){e=Nt(e),t=Nt(t);var o=_t.call(e);if(o!==_t.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!("function"===typeof a&&a instanceof a&&"function"===typeof s&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];var c=(n=n||[]).length;for(;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),i){if((c=e.length)!==t.length)return!1;for(;c--;)if(!jt(e[c],t[c],n,r))return!1}else{var u,l=Object.keys(e);if(c=l.length,Object.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!At(t,u)||!jt(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0}(e,t,n,r)}function Nt(e){return pt(e)?e.slice():O(e)||ht(e)?Array.from(e.entries()):e}function At(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pt(e){return e[Symbol.iterator]=Tt,e}function Tt(){return this}if("undefined"===typeof Proxy||"undefined"===typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ue,extras:{getDebugName:Ot},$mobx:S});var Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function kt(e,t){function n(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var It=function(){return(It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Dt(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function Rt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Mt,Vt,Ut="styles_pd-container__3WIdJ",Bt="styles_pd-node-templates-panel__UQj2a",Lt="styles_pd-node-template-item-wrapper__1aIWp",Wt="styles_pd-painter-wrapper__bYGWI";Rt("/* add css styles here (optional) */\n\n.styles_pd-container__3WIdJ {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n}\n\n.styles_pd-node-templates-panel__UQj2a {\n  width: 200px;\n  flex-grow: 0;\n  flex-shrink: 0;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n\n  background: #f2f2f2;\n}\n\n.styles_pd-node-template-item-wrapper__1aIWp {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 10px 0;\n}\n\n.styles_pd-canvas__aS3hB {\n  flex-grow: 1;\n  flex-shrink: 1;\n}\n\n.styles_pd-painter-wrapper__bYGWI {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n}\n\n.styles_pd-painter-wrapper__bYGWI::-webkit-scrollbar {\n  width: 0 !important;\n}\n"),function(e){e.Node="node",e.Edge="edge",e.OrphanEdge="oedge",e.Grip="grip"}(Mt||(Mt={})),function(e){e[e.Rect=0]="Rect",e[e.Circle=1]="Circle"}(Vt||(Vt={}));var Gt=0,Yt=1e6,Xt=[{id:Gt,type:Mt.Node,label:"\u5f00\u59cb",shape:Vt.Circle,dim:{r:30}},{id:Yt,type:Mt.Node,label:"\u7ed3\u675f",shape:Vt.Circle,dim:{r:30}}];var Ht=10,$t=5,Ft=(Mt.Node,{canvas:{background:"#ffffff"},rearrange:{hGap:20,vGap:50}});function Kt(e){return(Kt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e,t){return e(t={exports:{}},t.exports),t.exports}var on,an=rn(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case p:case i:case s:case a:return e;default:switch(e=e&&e.$$typeof){case u:case d:case c:return e;default:return t}}case o:return t}}}function b(e){return v(e)===p}t.typeOf=v,t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Profiler=s,t.Portal=o,t.StrictMode=a,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===p||e===s||e===a||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d)},t.isAsyncMode=function(e){return b(e)||v(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return v(e)===u},t.isContextProvider=function(e){return v(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===i},t.isProfiler=function(e){return v(e)===s},t.isPortal=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===a}});(on=an)&&on.__esModule&&Object.prototype.hasOwnProperty.call(on,"default")&&on.default;an.typeOf,an.AsyncMode,an.ConcurrentMode,an.ContextConsumer,an.ContextProvider,an.Element,an.ForwardRef,an.Fragment,an.Profiler,an.Portal,an.StrictMode,an.isValidElementType,an.isAsyncMode,an.isConcurrentMode,an.isContextConsumer,an.isContextProvider,an.isElement,an.isForwardRef,an.isFragment,an.isProfiler,an.isPortal,an.isStrictMode;var sn=rn(function(e){e.exports=an}),cn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},un={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ln={};ln[sn.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var pn=Object.defineProperty,dn=Object.getOwnPropertyNames,fn=Object.getOwnPropertySymbols,hn=Object.getOwnPropertyDescriptor,yn=Object.getPrototypeOf,vn=Object.prototype;var bn=function e(t,n,r){if("string"!==typeof n){if(vn){var o=yn(n);o&&o!==vn&&e(t,o,r)}var i=dn(n);fn&&(i=i.concat(fn(n)));for(var a=ln[t.$$typeof]||cn,s=ln[n.$$typeof]||cn,c=0;c<i.length;++c){var u=i[c];if(!un[u]&&(!r||!r[u])&&(!s||!s[u])&&(!a||!a[u])){var l=hn(n,u);try{pn(t,u,l)}catch(p){}}}return t}return t},mn=function(){function e(){zt(this,e),this.listeners=[]}return Jt(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}();function gn(e){function t(t,n,r,o,i,a){for(var s=arguments.length,c=new Array(s>6?s-6:0),u=6;u<s;u++)c[u-6]=arguments[u];return fe(function(){if(o=o||"<<anonymous>>",a=a||r,null==n[r]){if(t){var s=null===n[r]?"null":"undefined";return new Error("The "+i+" `"+a+"` is marked as required in `"+o+"`, but its value is `"+s+"`.")}return null}return e.apply(void 0,[n,r,o,i,a].concat(c))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function wn(e){var t=Kt(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function xn(e,t){return gn(function(n,r,o,i,a){return fe(function(){if(e&&wn(n[r])===t.toLowerCase())return null;var i;switch(t){case"Array":i=pt;break;case"Object":i=xt;break;case"Map":i=ht;break;default:throw new Error("Unexpected mobxType: ".concat(t))}var s=n[r];if(!i(s)){var c=function(e){var t=wn(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(s),u=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+c+"` supplied to `"+o+"`, expected `mobx.Observable"+t+"`"+u+".")}return null})})}function En(e,t){return gn(function(n,r,o,i,a){for(var s=arguments.length,c=new Array(s>5?s-5:0),u=5;u<s;u++)c[u-5]=arguments[u];return fe(function(){if("function"!==typeof t)return new Error("Property `"+a+"` of component `"+o+"` has invalid PropType notation.");var s=xn(e,"Array")(n,r,o);if(s instanceof Error)return s;for(var u=n[r],l=0;l<u.length;l++)if((s=t.apply(void 0,[u,l,o,i,a+"["+l+"]"].concat(c)))instanceof Error)return s;return null})})}xn(!1,"Array"),En.bind(null,!1),xn(!1,"Map"),xn(!1,"Object"),xn(!0,"Array"),En.bind(null,!0);var On=xn(!0,"Object");var _n=0;function Sn(e){if("function"===typeof Symbol)return Symbol(e);var t="__$mobx-react ".concat(e," (").concat(_n,")");return _n++,t}var jn=Sn("patchMixins"),Nn=Sn("patchedDefinition");function An(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t.locks++;try{var a;return void 0!==e&&null!==e&&(a=e.apply(this,o)),a}finally{t.locks--,0===t.locks&&t.methods.forEach(function(e){e.apply(n,o)})}}function Pn(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];An.call.apply(An,[this,e,t].concat(r))}}function Tn(e,t){for(var n=function(e,t){var n=e[jn]=e[jn]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(e,t),r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];n.methods.indexOf(s)<0&&n.methods.push(s)}var c=Object.getOwnPropertyDescriptor(e,t);if(!c||!c[Nn]){var u=e[t],l=function e(t,n,r,o,i){var a;var s=Pn(i,o);return a={},Qt(a,Nn,!0),Qt(a,"get",function(){return s}),Qt(a,"set",function(i){if(this===t)s=Pn(i,o);else{var a=e(this,n,r,o,i);Object.defineProperty(this,n,a)}}),Qt(a,"configurable",!0),Qt(a,"enumerable",r),a}(e,t,c?c.enumerable:void 0,n,u);Object.defineProperty(e,t,l)}}var Cn={mobxStores:On};Object.seal(Cn);var kn={contextTypes:{get:function(){return Cn},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function In(e,t,n){var r="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(r+="-with-"+n);var i=function(n){function r(){var e,t;zt(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=nn(this,(e=en(r)).call.apply(e,[this].concat(o)))).storeRef=function(e){t.wrappedInstance=e},t}return Zt(r,o["Component"]),Jt(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var i=e(this.context.mobxStores||{},n,this.context)||{};for(var a in i)n[a]=i[a];return function(e){return!(e.prototype&&e.prototype.render)}(t)||(n.ref=this.storeRef),Object(o.createElement)(t,n)}}]),r}();return i.displayName=r,bn(i,t),i.wrappedComponent=t,Object.defineProperties(i,kn),i}function Dn(){var e;if("function"===typeof arguments[0])return e=arguments[0],function(t){var n=In(e,t);return n.isMobxInjector=!1,(n=er(n)).isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}(t),function(n){return In(e,n,t.join("-"))}}var Rn=S||"$mobx",Mn=Sn("isUnmounted"),Vn=!1,Un=!1,Bn=!1,Ln="undefined"!==typeof WeakMap?new WeakMap:void 0,Wn=new mn,Gn=Sn("skipRender"),Yn=Sn("isForcingUpdate"),Xn="function"===typeof o.forwardRef&&Object(o.forwardRef)(function(e,t){}).$$typeof;function Hn(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}function $n(e){if(a.findDOMNode)try{return Object(a.findDOMNode)(e)}catch(t){return null}return null}function Fn(e){var t=$n(e);t&&Ln&&Ln.set(t,e),Wn.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}var Kn=new mn;function zn(e,t){if(qn(e,t))return!0;if("object"!==Kt(e)||null===e||"object"!==Kt(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!hasOwnProperty.call(t,n[o])||!qn(e[n[o]],t[n[o]]))return!1;return!0}function qn(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function Jn(e){var t=this;if(!0===Un)return e.call(this);function n(){var e=this;s=!1;var t=void 0,n=void 0;if(c.track(function(){Vn&&(e.__$mobRenderStart=Date.now());try{n=function(e,t){var n,r=Z(e);try{n=t()}finally{ee(r)}return n}(!1,a)}catch(r){t=r}Vn&&(e.__$mobRenderEnd=Date.now())}),t)throw Kn.emit(t),t;return n}var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;Hn(this,Gn,!1),Hn(this,Yn,!1);var a=e.bind(this),s=!1,c=new Pe("".concat(r,"#").concat(i,".render()"),function(){if(!s&&(s=!0,"function"===typeof t.componentWillReact&&t.componentWillReact(),!0!==t[Mn])){var e=!0;try{Hn(t,Yn,!0),t[Gn]||o.Component.prototype.forceUpdate.call(t),e=!1}finally{Hn(t,Yn,!1),e&&c.dispose()}}});return c.reactComponent=this,n[Rn]=c,this.render=n,n.call(this)}var Qn={componentWillUnmount:function(){if(!0!==Un&&(this.render[Rn]&&this.render[Rn].dispose(),this[Mn]=!0,Vn)){var e=$n(this);e&&Ln&&Ln.delete(e),Wn.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){Vn&&Fn(this)},componentDidUpdate:function(){Vn&&Fn(this)},shouldComponentUpdate:function(e,t){return Un&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!zn(this.props,e)}};function Zn(e,t){var n=Sn("reactProp_".concat(t,"_valueHolder")),r=Sn("reactProp_".concat(t,"_atomHolder"));function o(){return this[r]||Hn(this,r,A("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[n]},set:function(e){this[Yn]||zn(this[n],e)?Hn(this,n,e):(Hn(this,n,e),Hn(this,Gn,!0),o.call(this).reportChanged(),Hn(this,Gn,!1))}})}function er(e,t){if("string"===typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return Bn||(Bn=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),t?Dn.apply(null,e)(er(t)):function(t){return er(e,t)};var n=e;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===o.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),Xn&&n.$$typeof===Xn){var r=n.render;if("function"!==typeof r)throw new Error("render property of ForwardRef was not a function");return Object(o.forwardRef)(function(){var e=arguments;return i.a.createElement(tr,null,function(){return r.apply(void 0,e)})})}if("function"===typeof n&&(!n.prototype||!n.prototype.render)&&!n.isReactClass&&!o.Component.isPrototypeOf(n)){var a,s,c=er((s=a=function(e){function t(){return zt(this,t),nn(this,en(t).apply(this,arguments))}return Zt(t,o["Component"]),Jt(t,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),t}(),a.displayName=n.displayName||n.name,a.contextTypes=n.contextTypes,a.propTypes=n.propTypes,a.defaultProps=n.defaultProps,s));return bn(c,n),c}if(!n)throw new Error("Please pass a valid component to 'observer'");var u=n.prototype||n;!function(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){!function(e,t){Tn(e,t,Qn[t])}(e,t)}),e.shouldComponentUpdate?e.shouldComponentUpdate!==Qn.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=Qn.shouldComponentUpdate}(u),n.isMobXReactObserver=!0,Zn(u,"props"),Zn(u,"state");var l=u.render;return u.render=function(){return Jn.call(this,l)},n}var tr=er(function(e){var t=e.children,n=e.inject,r=e.render,o=t||r;if("undefined"===typeof o)return null;if(!n)return o();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var a=Dn(n)(o);return i.a.createElement(a,null)});tr.displayName="Observer";var nr=function(e,t,n,r,o){var i="children"===t?"render":"children";return"function"===typeof e[t]&&"function"===typeof e[i]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!==typeof e[t]&&"function"!==typeof e[i]?new Error("Invalid prop `"+o+"` of type `"+Kt(e[t])+"` supplied to `"+n+"`, expected `function`."):void 0};function rr(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function or(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function ir(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}tr.propTypes={render:nr,children:nr},rr.__suppressDeprecationWarning=!0,or.__suppressDeprecationWarning=!0,ir.__suppressDeprecationWarning=!0;var ar={children:!0,key:!0,ref:!0},sr=function(e){function t(e,n){var r;return zt(this,t),(r=nn(this,en(t).call(this,e,n))).state={},cr(e,r.state),r}return Zt(t,o["Component"]),Jt(t,[{key:"render",value:function(){return o.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return cr(this.context.mobxStores,e),cr(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e)return null;if(!t)return e;if(Object.keys(e).filter(ur).length!==Object.keys(t).filter(ur).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var n in e)ur(n)&&t[n]!==e[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),t}();function cr(e,t){if(e)for(var n in e)ur(n)&&(t[n]=e[n])}function ur(e){return!ar[e]&&"suppressChangedStoreWarning"!==e}sr.contextTypes={mobxStores:On},sr.childContextTypes={mobxStores:On.isRequired},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=rr,t.componentWillReceiveProps=or),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ir;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(sr);Sn("disposeOnUnmount");if(!o.Component)throw new Error("mobx-react requires React to be available");if(!Ue)throw new Error("mobx-react requires mobx to be available");if("function"===typeof a.unstable_batchedUpdates&&He({reactionScheduler:a.unstable_batchedUpdates}),"object"===("undefined"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":Kt(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var lr={spy:Ue,extras:{getDebugName:Ot}},pr={renderReporter:Wn,componentByNodeRegistry:Ln,componentByNodeRegistery:Ln,trackComponents:function(){if("undefined"===typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");Vn||(Vn=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(pr,lr)}var dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.dataType,n=e.dataId,r=e.anchor,i=e.cx,a=e.cy;return Object(o.createElement)("circle",{style:{cursor:"crosshair"},r:4,fill:"white",stroke:"red",strokeWidth:1,cx:i,cy:a,"data-type":Mt.Grip,"data-host":t+":"+n+":"+r})},t}(o.Component),fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props.node,t=e.id,n=e.dim,r=n.w,i=n.h;return[{anchor:"lc",cx:0,cy:i/2},{anchor:"tc",cx:r/2,cy:0},{anchor:"rc",cx:r,cy:i/2},{anchor:"bc",cx:r/2,cy:i}].map(function(e){return Object(o.createElement)(dr,It({key:e.anchor},e,{dataType:Mt.Node,dataId:t}))})},t}(o.Component),hr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props.node,t=e.id,n=e.dim.r;return[{anchor:"lc",cx:0,cy:n},{anchor:"tc",cx:n,cy:0},{anchor:"rc",cx:2*n,cy:n},{anchor:"bc",cx:n,cy:2*n}].map(function(e){return Object(o.createElement)(dr,It({key:e.anchor},e,{dataType:Mt.Node,dataId:t}))})},t}(o.Component);function yr(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.childRef=Object(o.createRef)(),n.state={hovered:!1},n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseLeave=n.handleMouseLeave.bind(n),n}return kt(n,t),n.prototype.handleMouseEnter=function(){this.setState({hovered:!0})},n.prototype.handleMouseLeave=function(){this.setState({hovered:!1})},n.prototype.render=function(){return Object(o.createElement)(e,It({},this.props,{_ref:this.childRef,hovered:this.state.hovered}))},n.prototype.componentDidMount=function(){var e=this.childRef.current;e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)},n.prototype.componentWillUnmount=function(){var e=this.childRef.current;e.removeEventListener("mouseenter",this.handleMouseEnter),e.removeEventListener("mouseleave",this.handleMouseLeave)},n}(o.Component)}var vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props.node,t=(e.id,e.dim),n=t.w,r=t.h;return Object(o.createElement)("rect",{style:{cursor:"move"},width:n,height:r,className:"pd-node","data-type":Mt.Node,"data-id":e.id,fill:"#cccccc"})},t}(o.PureComponent),br=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.w,n=e.h,r=e.fontSize,i=e.text,a=r||16;return Object(o.createElement)("text",{style:{pointerEvents:"none",userSelect:"none"},textAnchor:"middle",x:t/2,y:n/2+(a/2-1),fontSize:a},i)},t}(o.PureComponent),mr=yr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.node,n=e.dataStore,r=e._ref,i=e.hovered,a=t.dim,s=t.id,c=t.label,u=a,l=u.cx,p=u.cy,d=a.w||100,f=a.h||30,h=l-d/2,y=p-f/2,v=i||~(n.context.selectedNodeIds||[]).indexOf(s);return Object(o.createElement)("g",{ref:r,transform:"translate("+h+", "+y+")",width:d,height:f,onClick:function(){return n.selectNode(s)}},Object(o.createElement)(vr,{node:t}),Object(o.createElement)(br,{w:d,h:f,text:c}),v&&Object(o.createElement)(fr,{node:t}))},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component)),gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props.node,t=(e.id,e.dim),n=t,r=(n.cx,n.cy,t.r);return Object(o.createElement)("circle",{style:{cursor:"move"},className:"pd-node","data-type":Mt.Node,"data-id":e.id,r:r,cx:r,cy:r,fill:"#999999"})},t}(o.PureComponent),wr=yr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.node,n=e.dataStore,r=e._ref,i=e.hovered,a=t.id,s=t.dim,c=t.label,u=s,l=u.cx,p=u.cy,d=s.r||30,f=l-d,h=p-d,y=i||~(n.context.selectedNodeIds||[]).indexOf(a);return Object(o.createElement)("g",{ref:r,transform:"translate("+f+", "+h+")",width:2*d,height:2*d,onClick:function(){return n.selectNode(a)}},Object(o.createElement)(gr,{node:t}),Object(o.createElement)(br,{w:2*d,h:2*d,text:c}),y&&Object(o.createElement)(hr,{node:t}))},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component));function xr(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Er(e){return e.reduce(function(e,t){return~e.indexOf(t)?e:e.concat([t])},[])}function Or(e){return e.reduce(function(e,t){return Math.abs(t)<e?t:e})}function _r(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Sr(e,t){var n=e,r=n.cx,o=n.cy,i=e.r;if("tc"===t)return{cx:r,cy:o-i};if("bc"===t)return{cx:r,cy:o+i};if("lc"===t)return{cx:r-i,cy:o};if("rc"===t)return{cx:r+i,cy:o};throw new Error("\u9519\u8bef\u7684anchor\u7c7b\u578b: "+t)}function jr(e,t){var n=e,r=n.cx,o=n.cy,i=e,a=i.w,s=i.h;if("tc"===t)return{cx:r,cy:o-s/2};if("bc"===t)return{cx:r,cy:o+s/2};if("lc"===t)return{cx:r-a/2,cy:o};if("rc"===t)return{cx:r+a/2,cy:o};throw new Error("\u9519\u8bef\u7684anchor\u7c7b\u578b: "+t)}function Nr(e,t){var n=e.dim,r=e.shape;if(r===Vt.Circle)return Sr(n,t);if(r===Vt.Rect)return jr(n,t);throw new Error("\u9519\u8bef\u7684Shape\u7c7b\u578b: "+r)}function Ar(e,t,n){return Nr(e.find(function(e){return e.id===t}),n)}function Pr(e,t,n,r){return Object(o.createElement)("svg",{width:e,height:t,viewBox:"0 0 "+e+" "+t,version:"1.1",xmlns:"http://www.w3.org/2000/svg",ref:r,style:{display:"block"}},n)}function Tr(e){var t,n=e.dim,r=e.shape;if(r===Vt.Rect)return{w:(t=n).w,h:t.h};if(r===Vt.Circle)return{w:2*(t=n).r,h:2*t.r};throw new Error("\u9519\u8bef\u7684nodeTemplate shape:"+r)}function Cr(e,t){var n=e.reduce(function(e,n){if(n.id===t)return e;var r=n.dim,o=r.cx,i=r.cy,a=Tr(n),s=a.w,c=a.h;return{xs:e.xs.concat([o-s/2,o,o+s/2]),ys:e.ys.concat([i-c/2,i,i+c/2])}},{xs:[],ys:[]});return{xs:Er((n.xs||[]).sort()),ys:Er((n.ys||[]).sort())}}function kr(e){e.id;var t=e.shape;if(t===Vt.Rect)return Object(o.createElement)(vr,{node:e});if(t===Vt.Circle)return Object(o.createElement)(gr,{node:e});throw new Error("\u9519\u8bef\u7684node shape:"+t)}function Ir(e,t){var n=t.cx,r=t.cy;return It({},e,{templateId:e.id,dim:It({},e.dim,{cx:n,cy:r})})}function Dr(e,t,n,r,o){var i,a=n.dim.cx;return[n].concat(function n(i,c,u){var l=i.map(function(e){var n=e.id;return t.filter(function(e){return e.from.id===n})});var p=xr(l);var d=p.reduce(function(e,t){var n;return It({},e,((n={})[t.to.id]=c+1,n))},{});f=d,h=u,d=Object.keys(f).reduce(function(e,t){var n;return void 0!==h[t]?e:It({},e,((n={})[t]=f[t],n))},{});var f,h;if(Object.keys(d).length>0){var y=Object.keys(d).map(function(t){return e.find(function(e){return e.id===parseInt(t)})}),v=i[0].dim.cy+s(i)/2,b=v+o+s(y)/2,m=function(e){return e.reduce(function(e,t){var n=Tr(t),r=n.w;n.h;return e+r},0)}(y)+r*(y.length-1),g=a-m/2;return y.forEach(function(e){var t=Tr(e),n=t.w;t.h;e.dim.cx=g+n/2,g=g+n+r,e.dim.cy=b}),y.concat(n(y,c+1,It({},u,d)))}return[]}([n],0,((i={})[n.id]=0,i)));function s(e){return e.reduce(function(e,t){var n=Tr(t),r=(n.w,n.h);return Math.max(e,r)},0)}}function Rr(e){return"function"===typeof e}var Mr=!1,Vr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Mr=e},get useDeprecatedSynchronousErrorHandling(){return Mr}};function Ur(e){setTimeout(function(){throw e})}var Br={closed:!0,next:function(e){},error:function(e){if(Vr.useDeprecatedSynchronousErrorHandling)throw e;Ur(e)},complete:function(){}},Lr=Array.isArray||function(e){return e&&"number"===typeof e.length};function Wr(e){return null!=e&&"object"===typeof e}var Gr,Yr={e:{}};function Xr(){try{return Gr.apply(this,arguments)}catch(e){return Yr.e=e,Yr}}function Hr(e){return Gr=e,Xr}function $r(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}$r.prototype=Object.create(Error.prototype);var Fr=$r,Kr=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(Rr(o))Hr(o).call(this)===Yr&&(t=!0,e=e||(Yr.e instanceof Fr?zr(Yr.e.errors):[Yr.e]));if(Lr(i))for(a=-1,s=i.length;++a<s;){var c=i[a];if(Wr(c))if(Hr(c.unsubscribe).call(c)===Yr){t=!0,e=e||[];var u=Yr.e;u instanceof Fr?e=e.concat(zr(u.errors)):e.push(u)}}if(t)throw new Fr(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!==typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function zr(e){return e.reduce(function(e,t){return e.concat(t instanceof Fr?t.errors:t)},[])}var qr="function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Jr=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=Br;break;case 1:if(!n){i.destination=Br;break}if("object"===typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new Qr(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new Qr(i,n,r,o)}return i}return kt(t,e),t.prototype[qr]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(Kr),Qr=function(e){function t(t,n,r,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return Rr(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==Br&&(Rr((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return kt(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Vr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Vr.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Ur(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Ur(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Vr.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),Vr.useDeprecatedSynchronousErrorHandling)throw n;Ur(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Vr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return Vr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Ur(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Jr);var Zr="function"===typeof Symbol&&Symbol.observable||"@@observable";function eo(){}var to=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof Jr)return e;if(e[qr])return e[qr]()}return e||t||n?new Jr(e,t,n):new Jr(Br)}(e,t,n);if(r?r.call(o,this.source):o.add(this.source||Vr.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Vr.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Vr.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof Jr?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=no(t))(function(t,r){var o;o=n.subscribe(function(t){try{e(t)}catch(n){r(n),o&&o.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Zr]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:eo)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=no(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function no(e){if(e||(e=Vr.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function ro(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ro.prototype=Object.create(Error.prototype);var oo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return kt(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(o){n=!0,r=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return kt(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Kr)),io=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),ao=function(e){function t(n,r){void 0===r&&(r=io.now);var o=e.call(this,n,function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return kt(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(io),so=new to(function(e){return e.complete()});function co(e){return e?function(e){return new to(function(t){return e.schedule(function(){return t.complete()})})}(e):so}function uo(e){return e&&"function"===typeof e.schedule}var lo=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}};function po(e,t){return new to(t?function(n){var r=new Kr,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:lo(e))}function fo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(uo(n)?e.pop():n=void 0,e.length){case 0:return co(n);case 1:return n?po(e,n):function(e){var t=new to(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}(e[0]);default:return po(e,n)}}var ho=new ao(oo);function yo(e){return e}function vo(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}vo.prototype=Object.create(Error.prototype);var bo=vo;function mo(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}mo.prototype=Object.create(Error.prototype);function go(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new wo(e,t))}}var wo=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new xo(e,this.project,this.thisArg))},e}(),xo=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return kt(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Jr),Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Jr),Oo=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o.index=0,o}return kt(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Jr),_o=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Ur),t}};function So(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var jo=So(),No=function(e){return function(t){for(var n=e[jo]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"===typeof n.return&&t.add(function(){n.return&&n.return()}),t}},Ao=function(e){return function(t){var n=e[Zr]();if("function"!==typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Po=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function To(e){return e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}var Co=function(e){if(e instanceof to)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"===typeof e[Zr])return Ao(e);if(Po(e))return lo(e);if(To(e))return _o(e);if(e&&"function"===typeof e[jo])return No(e);var t=Wr(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ko(e,t,n,r,o){if(void 0===o&&(o=new Oo(e,n,r)),!o.closed)return Co(t)(o)}function Io(e,t){if(!t)return e instanceof to?e:new to(Co(e));if(null!=e){if(function(e){return e&&"function"===typeof e[Zr]}(e))return function(e,t){return new to(t?function(n){var r=new Kr;return r.add(t.schedule(function(){var o=e[Zr]();r.add(o.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:Ao(e))}(e,t);if(To(e))return function(e,t){return new to(t?function(n){var r=new Kr;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:_o(e))}(e,t);if(Po(e))return po(e,t);if(function(e){return e&&"function"===typeof e[jo]}(e)||"string"===typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new to(t?function(n){var r,o=new Kr;return o.add(function(){r&&"function"===typeof r.return&&r.return()}),o.add(t.schedule(function(){r=e[jo](),o.add(t.schedule(function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),o}:No(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}var Do=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Ro(e,this.project,this.concurrent))},e}(),Ro=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return kt(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new Oo(this,void 0,void 0);this.destination.add(r),ko(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Eo);function Mo(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"===typeof n?function(o){return o.pipe(e(function(e,r){return Io(t(e,r)).pipe(go(function(t,o){return n(e,t,r,o)}))},r))}:("number"===typeof n&&(r=n),function(e){return e.lift(new Do(t,r))})}(yo,e)}function Vo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length||2===e.length&&uo(e[1])?Io(e[0]):Mo(1)(fo.apply(void 0,e))}function Uo(e,t,n,r){return Rr(n)&&(r=n,n=void 0),r?Uo(e,t,n).pipe(go(function(e){return Lr(e)?r.apply(void 0,e):r(e)})):new to(function(r){!function e(t,n,r,o,i){var a;if(function(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}(t)){var c=t;t.on(n,r),a=function(){return c.off(n,r)}}else if(function(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}(t)){var u=t;t.addListener(n,r),a=function(){return u.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,p=t.length;l<p;l++)e(t[l],n,r,o,i)}o.add(a)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}function Bo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Vo.apply(void 0,[t].concat(e)))}}function Lo(e,t){return function(n){return n.lift(new Wo(e,t))}}var Wo=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Go(e,this.predicate,this.thisArg))},e}(),Go=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return kt(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(Jr);function Yo(e){return function(t){return 0===e?co():t.lift(new Xo(e))}}var Xo=function(){function e(e){if(this.total=e,this.total<0)throw new bo}return e.prototype.call=function(e,t){return t.subscribe(new Ho(e,this.total))},e}(),Ho=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return kt(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(Jr);function $o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return uo(o)?(r=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof o&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof to?e[0]:Mo(n)(po(e,r))}.apply(void 0,[t].concat(e)))}}function Fo(e,t){return"function"===typeof t?function(n){return n.pipe(Fo(function(n,r){return Io(e(n,r)).pipe(go(function(e,o){return t(n,e,r,o)}))}))}:function(t){return t.lift(new Ko(e))}}var Ko=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new zo(e,this.project))},e}(),zo=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return kt(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new Oo(this,void 0,void 0);this.destination.add(o),this.innerSubscription=ko(this,e,t,n,o)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t}(Eo);var qo=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new Jo(e),r=ko(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),Jo=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return kt(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Eo);function Qo(e){return function(t){return t.lift(new Zo(e))}}var Zo=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new ei(e,this.predicate))},e}(),ei=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.index=0,r}return kt(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(Jr),ti={leading:!0,trailing:!1};function ni(e,t,n){return void 0===t&&(t=ho),void 0===n&&(n=ti),function(r){return r.lift(new ri(e,t,n.leading,n.trailing))}}var ri=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new oi(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),oi=function(e){function t(t,n,r,o,i){var a=e.call(this,t)||this;return a.duration=n,a.scheduler=r,a.leading=o,a.trailing=i,a._hasTrailingValue=!1,a._trailingValue=null,a}return kt(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(ii,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(Jr);function ii(e){e.subscriber.clearThrottle()}function ai(e){var t=e.target,n=t.getAttribute("data-id");return{dataType:t.getAttribute("data-type")||void 0,dataId:n?parseInt(n):void 0}}function si(e){var t=e.target,n=function(e){if(!e)return;var t=e.split(":"),n=t[0],r=t[1],o=t[2];return{type:n,id:parseInt(r),anchor:o}}(t.getAttribute("data-host"));return{dataType:t.getAttribute("data-type")||void 0,dataHost:n}}function ci(e,t,n,r){var o=function(e,t,n){var r=t.x,o=t.y,i=t.w,a=t.h,s=(e.xs||[]).reduce(function(e,t){var o=Or([t-r,t-(i/2+r),t-(i+r)]);return Math.abs(o)<=n?e.concat([[t,Math.abs(o),o]]):e},[]),c=(e.ys||[]).reduce(function(e,t){var r=Or([t-o,t-(o+a/2),t-(o+a)]);return Math.abs(r)<=n?e.concat([[t,Math.abs(r),r]]):e},[]);return{xs:s.length<=0?[]:u(s),ys:c.length<=0?[]:u(c)};function u(e){var t=e.sort(function(e,t){return e[1]-t[1]}),n=t[0],r=(n[0],n[1]);return t.filter(function(e){return e[0],e[1]<=r})}}(e,t,n),i={xs:o.xs.map(function(e){var t=e[0];e[1];return t}),ys:o.ys.map(function(e){var t=e[0];e[1];return t})},a=o.xs.length<=0?0:o.xs[0][2],s=o.ys.length<=0?0:o.ys[0][2];return[i,Math.abs(a)<=r?a:0,Math.abs(s)<=r?s:0]}var ui=function(e){function t(t){var n=e.call(this,t)||this;return n.ref=Object(o.createRef)(),n.showOrphanNode=n.showOrphanNode.bind(n),n.hideOrphanNode=n.hideOrphanNode.bind(n),n}return kt(t,e),t.prototype.showOrphanNode=function(e){this.props.uiStore.showOrphanNode(e)},t.prototype.hideOrphanNode=function(){this.props.uiStore.hideOrphanNode()},t.prototype.componentDidMount=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=e.nodeTemplate,o=this.ref.current,i=document.body,a=Uo(o,"mousedown"),s=Uo(i,"mousemove"),c=Uo(i,"mouseup");this.dragSubs=function(e,t,n,r,o,i){return e.pipe(go(function(e){return{x0:e.clientX,y0:e.clientY,end:!1,snappableGrid:Cr(o.nodes)}}),Fo(function(e){return t.pipe(go(function(t){return It({},e,{x:t.clientX,y:t.clientY})}),ni(30),$o(n.pipe(go(function(t){return It({},e,{x:t.clientX,y:t.clientY,mouseup:!0})}),Yo(1),Bo(fo({finished:!0})))),Qo(function(e){return!e.finished}))})).subscribe(function(e){var t=r.clientXYToPainterXY(e.x,e.y),n=t.x,a=t.y;console.log(n,a);var s,c,u=Ir(i,{cx:n,cy:a}),l=Tr(u),p=l.w,d=l.h,f={x:u.dim.cx-p/2,y:u.dim.cy-d/2,w:p,h:d},h=ci(e.snappableGrid,f,Ht,$t),y=h[0],v=h[1],b=h[2];if(e.mouseup){o.hideSnappableGrid(),r.hideOrphanNode();var m=r.painterDim,g=Tr(Ir(i,{cx:e.x,cy:e.y})),w=g.w,x=g.h,E={x:e.x-w/2+v,y:e.y-x/2+b,w:w,h:x};(s=E).x>=(c=m).x&&s.y>=c.y&&s.x+s.w<=c.x+c.w&&s.y+s.h<=c.y+c.h&&o.addNode(It({},u,{dim:It({},u.dim,{cx:u.dim.cx+v,cy:u.dim.cy+b})}))}else{o.showSnappableGrid(y);var O=r.painterContainerBox;r.showOrphanNode({node:i,cx:e.x+v-O.x,cy:e.y+b-O.y})}})}(a,s,c,t,n,r)},t.prototype.componnetWillUnmount=function(){this.dragSubs.unsubscribe()},t.prototype.render=function(){var e=this.props.nodeTemplate,t=e.id,n=function(e,t){e.id;var n,r=e.shape,i=e.dim,a=e.label;if(r===Vt.Circle){var s=i.r,c=It({},e,{dim:It({},i,{cx:s,cy:s})}),u=Object(o.createElement)(br,{w:2*s,h:2*s,text:a}),l=kr(c);n=Pr(2*s,2*s,Object(o.createElement)(o.Fragment,null,l,u),t)}else{if(r!==Vt.Rect)throw new Error("\u9519\u8bef\u7684shape");var p=i,d=p.w,f=p.h;c=It({},e,{dim:It({},i,{cx:d/2,cy:f/2})}),u=Object(o.createElement)(br,{w:d,h:f,text:a}),l=kr(c),n=Pr(d,f,Object(o.createElement)(o.Fragment,null,l,u),t)}return n}(e,this.ref);return Object(o.createElement)("div",{key:t},n)},t=Dt([Dn(function(e){return{uiStore:e.uiStore,dataStore:e.dataStore}}),er],t)}(o.Component),li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.configStore,n=e.dataStore,r=t.nodeTemplates;return Object(o.createElement)("div",{className:Bt,style:{width:200}},Object(o.createElement)("input",{type:"button",onClick:function(){return n.rearrange()},value:"\u81ea\u52a8\u91cd\u6392"}),r.map(function(e){return Object(o.createElement)("div",{className:Lt,key:e.id},Object(o.createElement)(ui,{nodeTemplate:e}))}),Object(o.createElement)("div",{style:{flexGrow:1}}))},t=Dt([Dn(function(e){return{configStore:e.configStore,dataStore:e.dataStore}}),er],t)}(o.Component),pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.edge,n=e.dataStore.getEdgeEndPoints(t.id),r=n.fromXY,i=n.toXY;return[{anchor:"0",cx:0,cy:0},{anchor:"1",cx:_r({x:r.cx,y:r.cy},{x:i.cx,y:i.cy}),cy:0}].map(function(e){return Object(o.createElement)(dr,It({key:e.anchor},e,{dataType:t.type,dataId:t.id}))})},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component),di=yr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.edge,n=e.dataStore,r=(e.hovered,e._ref),i=t.id,a=t.from,s=t.to,c=n.getEdgeEndPoints(i),u=c.fromXY,l=c.toXY,p=~(n.context.selectedEdgeIds||[]).indexOf(i),d=n.context.hidedEdgeId===i,f={x1:0,y1:0,x2:_r({x:u.cx,y:u.cy},{x:l.cx,y:l.cy}),y2:0},h=180*Math.atan2(l.cy-u.cy,l.cx-u.cx)/Math.PI,y=d?"#dddddd":"#999999",v=Object(o.createElement)("line",It({},f,{strokeWidth:10,stroke:"transparent"})),b=Object(o.createElement)("line",It({className:"pd-edge","data-type":Mt.Edge,"data-id":i,stroke:y,markerEnd:"url(#arrow)"},f)),m=Object(o.createElement)("path",{d:"M"+f.x1+","+f.y1+" Q"+f.x2/2+","+f.x2/5+","+f.x2+","+f.y2,fill:"none",strokeWidth:10,stroke:"transparent"}),g=Object(o.createElement)("path",{d:"M"+f.x1+","+f.y1+" Q"+f.x2/2+","+f.x2/5+","+f.x2+","+f.y2,markerEnd:"url(#arrow)",fill:"none",stroke:y}),w="lc"===a.anchor&&"lc"===s.anchor||"rc"===a.anchor&&"rc"===s.anchor;return Object(o.createElement)("g",{ref:r,transform:"translate("+u.cx+", "+u.cy+") rotate("+h+")",onClick:function(){return n.selectEdge(i)}},w?m:v,w?g:b,p&&Object(o.createElement)(pi,{edge:t}))},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component)),fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.oedge,n=e.dataStore.getOrphanEdgeEndPoints(t.id),r=n.fromXY,i=n.toXY;return[{anchor:"0",cx:0,cy:0},{anchor:"1",cx:i.cx-r.cx,cy:i.cy-r.cy}].map(function(e){return Object(o.createElement)(dr,It({key:e.anchor},e,{dataType:t.type,dataId:t.id}))})},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component),hi=yr(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.render=function(){var e=this.props,t=e.oedge,n=e._ref,r=(e.hovered,e.dataStore),i=r.getOrphanEdgeEndPoints(t.id),a=i.fromXY,s=i.toXY,c=~(r.context.selectedOrphanEdgeIds||[]).indexOf(t.id),u={x1:0,y1:0,x2:s.cx-a.cx,y2:s.cy-a.cy},l=Object(o.createElement)("line",It({},u,{strokeWidth:6,stroke:"transparent"}));return Object(o.createElement)("g",{ref:n,transform:"translate("+a.cx+", "+a.cy+")",onClick:function(){return r.selectOrphanEdge(t.id)}},l,Object(o.createElement)("line",It({className:"pd-edge","data-type":Mt.OrphanEdge,"data-id":t.id},u,{stroke:"#999999",markerEnd:"url(#arrow)"})),c&&Object(o.createElement)(fi,{oedge:t}))},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component)),yi=function(){return Object(o.createElement)("marker",{id:"arrow",markerWidth:10,markerHeight:10,refX:8,refY:5,orient:"auto",markerUnits:"strokeWidth"},Object(o.createElement)("path",{d:"M2,2 L2,8 L8,5 L2,2",stroke:"#999",fill:"#999"}))};function vi(e,t,n,r,o){return e.pipe(go(function(e){var t=r.clientXYToPainterXY(e.clientX,e.clientY),n=t.x,o=t.y;return It({},si(e),{x0:n,y0:o})}),Lo(function(e){return e.dataType===Mt.Grip}),go(function(e){var t=e.dataHost,n=o.getElement(t.type,t.id);return It({},e,{host:n,pos0:o.anchorXY(n,t.anchor),orphanEdgeId:o.nextOrphanEdgeId()})}),Fo(function(e){return t.pipe(go(function(t){return It({},e,r.clientXYToPainterXY(t.clientX,t.clientY))}),ni(30),$o(n.pipe(go(function(t){return It({},e,r.clientXYToPainterXY(t.clientX,t.clientY),{mouseup:!0})}),Yo(1),Bo(fo({finished:!0})))),Qo(function(e){return!e.finished}))})).subscribe(function(e){e.orphanEdgeId,e.x0,e.y0;var t=e.x,n=e.y,r=(e.host,e.pos0,e.dataHost),i=o.findSnappedAnchor(t,n);i&&(i.xy.cx,i.xy.cy),r.type===Mt.Node?e.mouseup?function(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x,e.y,e.host,e.pos0,e.dataHost),o=mi(e,t);t.delOrphanEdge(n),o&&t.addEdge({type:Mt.Edge,from:{id:r.id,anchor:r.anchor},to:{id:o.host.id,anchor:o.anchor}})}(e,o):bi(e,o):r.type===Mt.Edge&&(e.mouseup?(o.showEdge(r.id),function(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x,e.y,e.host,e.pos0,e.dataHost),o=mi(e,t);if(t.delOrphanEdge(n),o){var i={id:o.host.id,anchor:o.anchor};"0"===r.anchor?t.patchEdge({id:r.id,from:i}):t.patchEdge({id:r.id,to:i})}}(e,o)):(o.hideEdge(r.id),bi(e,o)))})}function bi(e,t){var n=e.orphanEdgeId,r=(e.x0,e.y0,e.x),o=e.y,i=e.host,a=(e.pos0,e.dataHost),s=r,c=o,u=t.findSnappedAnchor(r,o);u&&(s=u.xy.cx,c=u.xy.cy);var l=a.type===Mt.Node?{from:{id:a.id,anchor:a.anchor},to:{cx:s,cy:c}}:"0"===a.anchor?{from:{cx:s,cy:c},to:i.to}:{from:i.from,to:{cx:s,cy:c}},p=l.from,d=l.to;t.upsetOrphanEdge({id:n,type:Mt.OrphanEdge,from:p,to:d})}function mi(e,t){e.orphanEdgeId,e.x0,e.y0;var n,r=e.x,o=e.y,i=(e.host,e.pos0,e.dataHost,t.findSnappedAnchor(r,o));if(!i){var a=t.xyInWhichNode(r,o);a&&(n=function(e,t){return["lc","tc","rc","bc"].reduce(function(n,r){var o=_r(t,{x:n.xy.cx,y:n.xy.cy}),i=e.shape===Vt.Rect?jr(e.dim,r):Sr(e.dim,r),a=i.cx,s=i.cy,c=_r(t,{x:a,y:s});return c<o?{host:e,anchor:r,xy:{cx:a,cy:s}}:n},{host:e,anchor:"lc",xy:{cx:1e8,cy:1e9}})}(a,{x:r,y:o}))}return i||n}var gi,wi=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),r={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:n?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)i["f"+a]=111+a;function s(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return c(e,t)}),o=function(e){return r.some(function(t){return u(t,e)})};return null==n?o:o(n)}function c(e,t){var n=t&&t.byKey,o={},i=(e=e.replace("++","+add")).split("+"),a=i.length;for(var s in r)o[r[s]]=!1;var c=!0,u=!1,d=void 0;try{for(var f,h=i[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var y=f.value,v=y.endsWith("?");v&&(y=y.slice(0,-1));var b=p(y),m=r[b];1!==a&&m||(n?o.key=b:o.which=l(y)),m&&(o[m]=!v||null)}}catch(g){u=!0,d=g}finally{try{!c&&h.return&&h.return()}finally{if(u)throw d}}return o}function u(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&(null!=(o="key"===n?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r)return!1}return!0}function l(e){return e=p(e),i[e]||e.toUpperCase().charCodeAt(0)}function p(e){return e=e.toLowerCase(),e=o[e]||e}t.default=s,t.isHotkey=s,t.isCodeHotkey=function(e,t){return s(e,t)},t.isKeyHotkey=function(e,t){return s(e,{byKey:!0},t)},t.parseHotkey=c,t.compareHotkey=u,t.toKeyCode=l,t.toKeyName=p}(gi={exports:{}},gi.exports),gi.exports),xi=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(wi);wi.isHotkey,wi.isCodeHotkey,wi.isKeyHotkey,wi.parseHotkey,wi.compareHotkey,wi.toKeyCode,wi.toKeyName;var Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kt(t,e),t.prototype.snappableLine=function(e,t){return"x"===e?Oi("x"+t,t,-1e4,t,1e4):Oi("y"+t,-1e4,t,1e4,t)},t.prototype.render=function(){var e=this,t=this.props.dataStore.context.snappableGrid||{},n=t.xs,r=t.ys,i=n?n.map(function(t){return e.snappableLine("x",t)}):null,a=r?r.map(function(t){return e.snappableLine("y",t)}):null;return Object(o.createElement)(o.Fragment,null,i,a)},t=Dt([Dn(function(e){return{dataStore:e.dataStore}}),er],t)}(o.Component);function Oi(e,t,n,r,i){return Object(o.createElement)("line",{key:e,style:{pointerEvents:"none"},x1:t,x2:r,y1:n,y2:i,stroke:"#1890ff",strokeWidth:1,strokeDasharray:"2 1"})}var _i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t}return kt(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=Uo(this.ref.current,"mousedown"),o=Uo(document.body,"mousemove"),i=Uo(document.body,"mouseup");r.pipe(go(function(e){var r=t.clientXYToPainterXY(e.clientX,e.clientY);return{x0:r.x,y0:r.y,pos0:n.nodes.map(function(e){return[e.id,{cx:e.dim.cx,cy:e.dim.cy}]})}}),Fo(function(e){return o.pipe(go(function(n){return It({},e,t.clientXYToPainterXY(n.clientX,n.clientY))}),(n=i,function(e){return e.lift(new qo(n))}));var n})).subscribe(function(e){var t=e.x0,r=(e.y0,e.x),o=(e.y,e.pos0),i=r-t;n.moveAllNodes(o,i,0)})},t.prototype.componentWillUnmount=function(){},t.prototype.render=function(){var e,t,n=this.props.dataStore,r=n.startNode.dim,i=r.cx,a=r.cy,s={x1:0,y1:0,x2:0,y2:60},c=Si(s),u=ji(s);if(n.endNode){var l=n.endNode.dim,p=l.cx,d=l.cy,f=Tr(n.endNode),h=(f.w,f.h);e=Si(y={x1:p-i,y1:d+h+50,x2:p-i,y2:d+h+800}),t=ji(y)}else{var y,v=Tr(n.startNode),b=(v.w,v.h);e=Si(y={x1:0,y1:a+b+500,x2:0,y2:a+b+800}),t=ji(y)}return Object(o.createElement)("g",{transform:"translate("+i+", 0)",ref:this.ref},c,u,e,t)},t=Dt([Dn(function(e){return{dataStore:e.dataStore,uiStore:e.uiStore}}),er],t)}(o.Component);function Si(e){return Object(o.createElement)("line",It({},e,{strokeWidth:10,stroke:"transparent",style:{cursor:"ew-resize"}}))}function ji(e){return Object(o.createElement)("line",It({},e,{strokeWidth:2,stroke:"#cccccc",strokeDasharray:"10 5 5 5",style:{pointerEvents:"none"}}))}var Ni=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t.handleBackgroundClick=function(){t.props.dataStore.unselectAll()},t}return kt(t,e),t.prototype.getNodesView=function(e){return e.map(function(e){return function(e){var t=e.id,n=e.shape;if(n===Vt.Rect)return Object(o.createElement)(mr,{key:t,node:e});if(n===Vt.Circle)return Object(o.createElement)(wr,{key:e.id,node:e});throw new Error("\u9519\u8bef\u7684node shape:"+n)}(e)})},t.prototype.getEdgesView=function(e){return e.map(function(e){return Object(o.createElement)(di,{key:e.id,edge:e})})},t.prototype.getOrphanEdgesView=function(e){return(e||[]).map(function(e){return Object(o.createElement)(hi,{key:e.id,oedge:e})})},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.uiStore,r=t.dataStore,o=this.ref.current,i=Uo(o,"mousedown"),a=Uo(document.body,"mousemove"),s=Uo(document.body,"mouseup"),c=Uo(document.body,"keydown");this.keydown$=function(e,t){return e.subscribe(function(e){xi("esc",e)?t.unselectAll():xi(["del","backspace"],e)&&t.delSelected()})}(c,r),this.dragNode$=function(e,t,n,r,o){return e.pipe(go(function(e){var t=r.clientXYToPainterXY(e.clientX,e.clientY),n=t.x,o=t.y;return It({},ai(e),{x0:n,y0:o})}),Lo(function(e){return e.dataType===Mt.Node}),go(function(e){var t=o.getElement(e.dataType,e.dataId);return It({},e,{element:t,pos0:o.getElementPos(t),snappableGrid:Cr(o.nodes,t.id)})}),Fo(function(e){return t.pipe(go(function(t){return It({},e,r.clientXYToPainterXY(t.clientX,t.clientY))}),ni(30),$o(n.pipe(go(function(t){return It({},e,r.clientXYToPainterXY(t.clientX,t.clientY),{mouseup:!0})}),Yo(1),Bo(fo({finished:!0})))),Qo(function(e){return!e.finished}))})).subscribe(function(e){var t=e.x0,n=e.x,r=e.y,i=e.y0,a=e.element,s=e.pos0,c=(e.snappableGrid,s.cx+(n-t)),u=s.cy+(r-i),l=Tr(a),p=l.w,d=l.h,f={x:c-p/2,y:u-d/2,w:p,h:d},h=ci(e.snappableGrid,f,Ht,$t),y=h[0],v=h[1],b=h[2];o.showSnappableGrid(y),o.repositionNode({element:a,newPos:{cx:c+v,cy:u+b}}),e.mouseup&&o.hideSnappableGrid()})}(i,a,s,n,r),this.dragGrip$=vi(i,a,s,n,r);var u=Uo(o,"dblclick").pipe(go(function(e){return ai(e)}),Lo(function(e){var t=e.dataType;e.dataId;return t===Mt.Node}));this.activeNode$=u.subscribe(function(t){t.dataType;var n=t.dataId;return e.props.dataStore.events.onActiveNode(n)})},t.prototype.componentWillUnmount=function(){this.dragNode$.unsubscribe(),this.dragGrip$.unsubscribe(),this.keydown$.unsubscribe(),this.activeNode$.unsubscribe()},t.prototype.render=function(){var e=this.props,t=e.uiStore,n=e.dataStore,r=e.configStore,i=t.painterDim,a=i.w,s=(i.h,n),c=s.nodes,u=s.edges,l=s.orphanEdges,p=r.canvas,d=p&&p.background||"transparent",f=this.getNodesView(c),h=this.getEdgesView(u),y=this.getOrphanEdgesView(l);return Pr(a,5e3,Object(o.createElement)(o.Fragment,null,Object(o.createElement)(yi,null),Object(o.createElement)("rect",{className:"svg-background-rect",width:"100%",height:"100%",fill:d,onClick:this.handleBackgroundClick}),Object(o.createElement)(_i,null),f,h,y,Object(o.createElement)(Ei,null)),this.ref)},t=Dt([Dn(function(e){return{uiStore:e.uiStore,configStore:e.configStore,dataStore:e.dataStore}}),er],t)}(o.Component),Ai={cx:-1e5,cy:-1e5,node:void 0},Pi=function(){function e(){this.windowDim={width:window.innerWidth,height:window.innerHeight},this.painterContainerBox={x:0,y:0,w:300,h:300},this.painterScrollTop=0,this.orphanNodeInfo=Ai}return Object.defineProperty(e.prototype,"painterDim",{get:function(){return{x:200+this.painterContainerBox.x,y:this.painterContainerBox.y,w:this.painterContainerBox.w-200,h:this.painterContainerBox.h}},enumerable:!0,configurable:!0}),e.prototype.resetWindowDim=function(){this.windowDim={width:window.innerWidth,height:window.innerHeight}},e.prototype.resetPainterContainerBox=function(e){this.painterContainerBox=e},e.prototype.showOrphanNode=function(e){this.orphanNodeInfo=e},e.prototype.hideOrphanNode=function(){this.orphanNodeInfo=Ai},e.prototype.resetPainterScrollTop=function(e){this.painterScrollTop=e},e.prototype.clientXYToPainterXY=function(e,t){return{x:e-this.painterDim.x,y:t-(this.painterDim.y-this.painterScrollTop)}},Dt([F.struct],e.prototype,"windowDim",void 0),Dt([F.struct],e.prototype,"painterContainerBox",void 0),Dt([J.struct],e.prototype,"painterDim",null),Dt([We],e.prototype,"resetWindowDim",null),Dt([We],e.prototype,"resetPainterContainerBox",null),Dt([F.struct],e.prototype,"orphanNodeInfo",void 0),Dt([We],e.prototype,"showOrphanNode",null),Dt([We],e.prototype,"hideOrphanNode",null),Dt([We],e.prototype,"resetPainterScrollTop",null),e}(),Ti=function(){function e(e){this.canvas=e.canvas||{},this.rearrange=e.rearrange,this.nodeTemplates=Xt.concat(e.nodeTemplates).sort(function(e,t){return e.id-t.id})}return Object.defineProperty(e.prototype,"config",{get:function(){return{canvas:this.canvas,nodeTemplates:this.nodeTemplates}},enumerable:!0,configurable:!0}),Dt([F],e.prototype,"canvas",void 0),Dt([F],e.prototype,"rearrange",void 0),Dt([F],e.prototype,"nodeTemplates",void 0),Dt([J],e.prototype,"config",null),e}();function Ci(e){return e&&0!==e.length?e.reduce(function(e,t){return e<t.id?t.id:e},-1e4)+1:1}var ki=function(){function e(e,t,n){this.context={snappableGrid:{xs:[],ys:[]}},this.nodes=[],this.edges=[],this.orphanEdges=[],this.events=n;var r=t.nodeTemplates;this.nodes=(e.nodes||[]).sort(function(e,t){return e.id-t.id}).map(function(e){var t=e.templateId,n=r.find(function(e){return e.id===t});return{id:e.id,type:e.type,label:e.label||n.label,shape:n.shape,templateId:t,dim:It({},n.dim,e.dim)}}),this.edges=(e.edges||[]).sort(function(e,t){return e.id-t.id})}return Object.defineProperty(e.prototype,"startNode",{get:function(){return this.nodes.find(function(e){return e.templateId===Gt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endNode",{get:function(){return this.nodes.find(function(e){return e.templateId===Yt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){var e=this;return xr(this.nodes.map(function(t){return["lc","tc","rc","bc"].map(function(n){return{host:t,anchor:n,xy:e.anchorXY(t,n)}})}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return{nodes:this.nodes,edges:this.edges}},enumerable:!0,configurable:!0}),e.prototype.addNode=function(e){if((e.templateId!==Gt||!this.getNode(Gt))&&(e.templateId!==Yt||!this.getNode(Yt))){if(e.templateId===Yt){var t=this.startNode.dim.cx;e=It({},e,{dim:It({},e.dim,{cx:t})})}this.nodes.push(It({},e,{id:Ci(this.nodes)}))}},e.prototype.addEdge=function(e){var t=e.from,n=e.to;t.id===n.id||this.findEdgeByStartAndEndNode(t.id,n.id)||this.edges.push(It({},e,{id:Ci(this.edges)}))},e.prototype.patchNode=function(e){var t=e.id,n=this.getNode(t);Object.assign(n,e)},e.prototype.patchEdge=function(e){var t=e.id,n=this.getEdge(t),r=It({},n,e);if(r.from.id!==r.to.id){var o=this.findEdgeByStartAndEndNode(r.from.id,r.to.id);o&&o.id!==t||Object.assign(n,e)}},e.prototype.repositionNode=function(e){var t=e.element,n=e.newPos;if(t.type!==Mt.Node)throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+t.type);t.id;this.nodes.forEach(function(e){e.id===t.id&&(e.dim=It({},e.dim,n))})},e.prototype.moveAllNodes=function(e,t,n){this.nodes=this.nodes.map(function(r){var o=e.find(function(e){var t=e[0];e[1];return t===r.id}),i=(o[0],o[1]);return It({},r,{dim:It({},r.dim,{cx:i.cx+t,cy:i.cy+n})})})},e.prototype.upsetOrphanEdge=function(e){var t=this.getOrphanEdge(e.id);t?Object.assign(t,e):this.orphanEdges.push(e)},e.prototype.selectNode=function(e){this.context.selectedEdgeIds=[],this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[e]},e.prototype.selectEdge=function(e){this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[e]},e.prototype.selectOrphanEdge=function(e){this.context.selectedOrphanEdgeIds=[e],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[]},e.prototype.unselectAll=function(){this.context.selectedOrphanEdgeIds=[],this.context.selectedNodeIds=[],this.context.selectedEdgeIds=[],this.context.snappableGrid={xs:[],ys:[]}},e.prototype.delSelected=function(){var e=this,t=this.context,n=t.selectedOrphanEdgeIds,r=t.selectedNodeIds,o=t.selectedEdgeIds;(n||[]).forEach(function(t){return e.delOrphanEdge(t)}),(o||[]).forEach(function(t){return e.delEdge(t)}),(r||[]).forEach(function(t){return e.delNode(t)}),this.unselectAll()},e.prototype.delNode=function(e){e!==Gt&&(this.nodes=this.nodes.filter(function(t){return t.id!==e}),this.delEdgeOnNode(e),this.events.onDelNode(e))},e.prototype.delEdge=function(e){this.edges=this.edges.filter(function(t){return t.id!==e})},e.prototype.delEdgeOnNode=function(e){this.edges=this.edges.filter(function(t){return t.from.id!==e&&t.to.id!==e})},e.prototype.delOrphanEdge=function(e){this.orphanEdges=(this.orphanEdges||[]).filter(function(t){return t.id!==e}),this.context.selectedOrphanEdgeIds=(this.context.selectedOrphanEdgeIds||[]).filter(function(t){return e!==e})},e.prototype.hideEdge=function(e){this.context.hidedEdgeId=e},e.prototype.showEdge=function(e){this.context.hidedEdgeId===e&&delete this.context.hidedEdgeId},e.prototype.showSnappableGrid=function(e){this.context.snappableGrid=e},e.prototype.hideSnappableGrid=function(){delete this.context.snappableGrid},e.prototype.rearrange=function(){var e=this.configStore.config.rearrange,t=e.hGap,n=e.vGap;this.nodes=Dr(this.nodes,this.edges,this.startNode,t,n)},e.prototype.findEdgeByStartAndEndNode=function(e,t){return this.edges.find(function(n){return n.from.id===e&&n.to.id===t})},e.prototype.getElement=function(e,t){if(e===Mt.Node)return this.nodes.find(function(e){return e.id===t});if(e===Mt.Edge)return this.edges.find(function(e){return e.id===t});throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+e)},e.prototype.getElementPos=function(e){if(e.type===Mt.Node){var t=e;return{cx:t.dim.cx,cy:t.dim.cy}}throw new Error("\u9519\u8bef\u7684element type\u7c7b\u578b:"+e.type)},e.prototype.anchorXY=function(e,t){if(e.type===Mt.Node)return Nr(e,t);if(e.type===Mt.Edge)return function(e,t,n){var r="0"===t?e.from:e.to,o=r.id,i=r.anchor;return Nr(n.find(function(e){return e.id===o}),i)}(e,t,this.nodes);throw new Error("\u9519\u8bef\u7684hostType:"+e.type)},e.prototype.getNode=function(e){return this.nodes.find(function(t){return t.id===e})},e.prototype.getEdge=function(e){return this.edges.find(function(t){var n=t.id;return e===n})},e.prototype.getOrphanEdge=function(e){return this.orphanEdges.find(function(t){var n=t.id;return e===n})},e.prototype.getOrphanEdgeEndPoints=function(e){var t=this.orphanEdges.find(function(t){var n=t.id;return e===n});if(!t)throw new Error("oedgeId\u65e0\u6548:"+e);var n=t.from,r=t.to;return{fromXY:n.anchor?Ar(this.nodes,n.id,n.anchor):n,toXY:r.anchor?Ar(this.nodes,r.id,r.anchor):r}},e.prototype.getEdgeEndPoints=function(e){var t=this.edges.find(function(t){var n=t.id;return e===n});if(!t)throw new Error("edgeId\u65e0\u6548:"+e);var n=t.from,r=t.to;return{fromXY:Ar(this.nodes,n.id,n.anchor),toXY:Ar(this.nodes,r.id,r.anchor)}},e.prototype.nextOrphanEdgeId=function(){return Ci(this.orphanEdges)},e.prototype.findSnappedAnchor=function(e,t){return this.anchors.find(function(n){var r=n.xy;return _r({x:r.cx,y:r.cy},{x:e,y:t})<=5})},e.prototype.xyInWhichNode=function(e,t){return this.nodes.find(function(n){var r=n.dim,o=n.shape,i=r,a=i.cx,s=i.cy;if(o===Vt.Rect){var c=r,u=c.w,l=c.h;return e>=a-u/2&&e<=a+u/2&&t>=s-l/2&&t<=s+l/2}if(o===Vt.Circle){var p=r.r;return _r({x:e,y:t},{x:a,y:s})<=p}throw new Error("\u9519\u8bef\u7684shape: "+o)})},Dt([F],e.prototype,"context",void 0),Dt([F],e.prototype,"nodes",void 0),Dt([F],e.prototype,"edges",void 0),Dt([F],e.prototype,"orphanEdges",void 0),Dt([J],e.prototype,"startNode",null),Dt([J],e.prototype,"endNode",null),Dt([J],e.prototype,"anchors",null),Dt([J],e.prototype,"data",null),Dt([We],e.prototype,"addNode",null),Dt([We],e.prototype,"addEdge",null),Dt([We],e.prototype,"patchNode",null),Dt([We],e.prototype,"patchEdge",null),Dt([We],e.prototype,"repositionNode",null),Dt([We],e.prototype,"moveAllNodes",null),Dt([We],e.prototype,"upsetOrphanEdge",null),Dt([We],e.prototype,"selectNode",null),Dt([We],e.prototype,"selectEdge",null),Dt([We],e.prototype,"selectOrphanEdge",null),Dt([We],e.prototype,"unselectAll",null),Dt([We],e.prototype,"delSelected",null),Dt([We],e.prototype,"delNode",null),Dt([We],e.prototype,"delEdge",null),Dt([We],e.prototype,"delEdgeOnNode",null),Dt([We],e.prototype,"delOrphanEdge",null),Dt([We],e.prototype,"hideEdge",null),Dt([We],e.prototype,"showEdge",null),Dt([We],e.prototype,"showSnappableGrid",null),Dt([We],e.prototype,"hideSnappableGrid",null),Dt([We],e.prototype,"rearrange",null),e}(),Ii="styles_pd-orphan-node-container__acyIn";Rt(".styles_pd-orphan-node-container__acyIn {\n  position: absolute;\n}\n");var Di=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=Object(o.createRef)(),t}return kt(t,e),t.prototype.render=function(){var e=this.props.uiStore.orphanNodeInfo,t=e.cx,n=e.cy,r=e.node;if(!r)return null;var i=Tr(r),a=i.w,s=i.h,c=It({},r,{dim:It({},r.dim,{cx:a/2,cy:s/2})}),u=Object(o.createElement)(br,{w:a,h:s,text:r.label||""}),l=kr(c);return Object(o.createElement)("div",{className:Ii,style:{left:t-a/2,top:n-s/2}},Pr(a,s,Object(o.createElement)(o.Fragment,null,l,u),this.ref))},t=Dt([Dn(function(e){return{uiStore:e.uiStore}}),er],t)}(o.Component);He({enforceActions:"observed"});var Ri=function(e){function t(t){var n=e.call(this,t)||this;n.painterContainerRef=i.a.createRef(),n.painterWrapperRef=i.a.createRef(),n.uiStore=new Pi;var r=n.props,o=r.config,a=r.data,s=r.events;return n.configStore=new Ti(It({},Ft,o)),n.dataStore=new ki(a,n.configStore,s),n.onResize=n.onResize.bind(n),n.handlePainterWrapperScroll=n.handlePainterWrapperScroll.bind(n),n}return kt(t,e),t.prototype.onResize=function(){this.uiStore.resetWindowDim();var e=this.painterContainerRef.current.getBoundingClientRect(),t=e.left,n=e.top,r=e.width,o=e.height;this.uiStore.resetPainterContainerBox({x:t,y:n,w:r,h:o})},t.prototype.render=function(){return i.a.createElement(sr,{uiStore:this.uiStore,configStore:this.configStore,dataStore:this.dataStore},i.a.createElement("div",{ref:this.painterContainerRef,className:Ut},i.a.createElement(li,null),i.a.createElement("div",{ref:this.painterWrapperRef,className:Wt,style:{width:this.uiStore.painterDim.w,height:this.uiStore.painterDim.h}},i.a.createElement(Ni,null)),i.a.createElement(Di,null)))},t.prototype.componentDidMount=function(){this.onResize(),window.addEventListener("resize",this.onResize),this.painterWrapperRef.current.addEventListener("scroll",this.handlePainterWrapperScroll)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.painterWrapperRef.current.removeEventListener("scroll",this.handlePainterWrapperScroll)},t.prototype.handlePainterWrapperScroll=function(){var e=this.painterWrapperRef.current;this.uiStore.resetPainterScrollTop(e.scrollTop)},t.prototype.getController=function(){var e=this.dataStore;return{rearrange:e.rearrange.bind(e),getAllAssoc:function(){return e.edges.map(function(e){return{fromNodeId:e.from.id,toNodeId:e.to.id}})},markNode:e.patchNode.bind(e)}},t=Dt([er],t)}(i.a.Component);He({enforceActions:"observed"}),t.e=Ri}).call(this,n(22),n(4))},13:function(e,t,n){e.exports=n(27)},18:function(e,t,n){},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(7),a=n.n(i),s=(n(18),n(8)),c=n(9),u=n(11),l=n(10),p=n(12),d=(n(20),n(1)),f=[{id:1,type:d.a.Node,label:"\u64cd\u4f5c",shape:d.c.Rect,dim:{w:100,h:30}}],h={nodes:[{id:d.d,type:d.a.Node,templateId:d.d,dim:{cx:300,cy:100,r:30}},{id:d.b,type:d.a.Node,templateId:d.b,dim:{cx:300,cy:800,r:30}},{id:1,type:d.a.Node,label:"\u7279\u6b8a\u540d\u79f0",templateId:1,dim:{cx:300,cy:300,w:100,h:50}},{id:2,type:d.a.Node,templateId:1,dim:{cx:300,cy:500,w:100,h:50}},{id:3,type:d.a.Node,templateId:1,dim:{cx:300,cy:700,w:100,h:50}}],edges:[{id:1,type:d.a.Edge,from:{id:d.d,anchor:"bc"},to:{id:1,anchor:"tc"}},{id:2,type:d.a.Edge,from:{id:1,anchor:"bc"},to:{id:2,anchor:"tc"}},{id:3,type:d.a.Edge,from:{id:2,anchor:"bc"},to:{id:3,anchor:"tc"}},{id:5,type:d.a.Edge,from:{id:3,anchor:"bc"},to:{id:d.b,anchor:"tc"}}]},y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).config={canvas:{background:"#ffffff"},nodeTemplates:f},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(d.e,{config:this.config,data:h,events:{}}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.702f7da2.chunk.js.map